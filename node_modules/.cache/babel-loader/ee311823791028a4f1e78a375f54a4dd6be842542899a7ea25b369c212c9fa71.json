{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mrmst\\\\OneDrive\\\\Documentos\\\\Front End\\\\ClusterWarehouse\\\\src\\\\Components\\\\Consultar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './Consultar.css';\nimport { Html5Qrcode } from 'html5-qrcode';\nimport { API_ENDPOINTS } from '../config';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Consultar() {\n  _s();\n  // Adiciona um manipulador de erros global para este componente\n  useEffect(() => {\n    const handleError = event => {\n      var _event$error;\n      // Ignora erros de aborto de requisição e erros de câmera específicos\n      const errorMessage = (((_event$error = event.error) === null || _event$error === void 0 ? void 0 : _event$error.message) || event.message || '').toLowerCase();\n      const shouldIgnore = errorMessage.includes('aborted') || errorMessage.includes('camera') || errorMessage.includes('permission') || (event === null || event === void 0 ? void 0 : event.type) === 'abort';\n      if (shouldIgnore && !errorMessage.includes('critical')) {\n        console.warn('Aviso:', errorMessage || 'Operação interrompida (pode ser esperado)');\n        return;\n      }\n\n      // Log mais detalhado para erros não ignorados\n      console.error('Erro não tratado:', {\n        error: event.error || event,\n        message: event.message,\n        type: event.type,\n        timestamp: new Date().toISOString()\n      });\n    };\n\n    // Adiciona os listeners\n    const errorListener = event => {\n      try {\n        handleError(event);\n      } catch (e) {\n        console.error('Erro no manipulador de erros:', e);\n      }\n    };\n    const unhandledRejectionListener = event => {\n      try {\n        handleError(event);\n      } catch (e) {\n        console.error('Erro no manipulador de rejeições não tratadas:', e);\n      }\n    };\n    window.addEventListener('error', errorListener);\n    window.addEventListener('unhandledrejection', unhandledRejectionListener);\n\n    // Limpa os listeners quando o componente for desmontado\n    return () => {\n      try {\n        window.removeEventListener('error', errorListener);\n        window.removeEventListener('unhandledrejection', unhandledRejectionListener);\n      } catch (e) {\n        console.error('Erro ao remover listeners:', e);\n      }\n    };\n  }, []);\n  const [consulta, setConsulta] = useState('');\n  const [resultado, setResultado] = useState(null);\n  const [carregando, setCarregando] = useState(false);\n  const [mostrarCamera, setMostrarCamera] = useState(false);\n  const [erroCamera, setErroCamera] = useState('');\n  const [cameraPronta, setCameraPronta] = useState(false);\n\n  // Refs para controle de estado assíncrono\n  const iniciandoCameraRef = useRef(false);\n  const parandoCameraRef = useRef(false);\n  const html5QrCodeRef = useRef(null);\n  const handleChange = e => {\n    setConsulta(e.target.value);\n  };\n  useEffect(() => {\n    // Função para limpar recursos quando o componente for desmontado\n    return () => {\n      console.log('Componente será desmontado, limpando recursos...');\n      // Usamos setTimeout para evitar problemas de sincronização\n      setTimeout(() => {\n        pararCamera(true).catch(() => {\n          // Ignora erros durante a limpeza\n        });\n      }, 0);\n    };\n  }, []);\n  const iniciarCamera = async () => {\n    console.log('=== INICIANDO CÂMERA ===');\n    console.log('1. Verificando se já está inicializando...');\n\n    // Se já estiver inicializando, não faz nada\n    if (iniciandoCameraRef.current) {\n      console.log('1.1. Já está em processo de inicialização, saindo...');\n      return;\n    }\n    console.log('2. Marcando como inicializando...');\n    iniciandoCameraRef.current = true;\n\n    // Limpa qualquer erro anterior\n    setErroCamera('');\n    try {\n      console.log('3. Verificando suporte a getUserMedia...');\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('Seu navegador não suporta acesso à câmera ou o protocolo não é HTTPS');\n      }\n      console.log('4. Solicitando permissão de câmera...');\n      try {\n        // Primeiro tenta apenas a permissão\n        await navigator.mediaDevices.getUserMedia({\n          video: {\n            facingMode: 'environment'\n          }\n        });\n        console.log('4.1. Permissão de câmera concedida');\n      } catch (permError) {\n        console.warn('4.2. Erro ao obter permissão:', permError.message);\n        throw new Error('Permissão de câmera negada');\n      }\n      setMostrarCamera(true);\n      setErroCamera('Preparando a câmera...');\n      console.log('5. Configurando o scanner...');\n      // Configuração mínima\n      const config = {\n        fps: 10,\n        qrbox: {\n          width: 250,\n          height: 250\n        },\n        experimentalFeatures: {\n          useBarCodeDetectorIfSupported: true\n        },\n        disableFlip: true,\n        showTorchButtonIfSupported: true,\n        // Tenta melhorar a performance\n        aspectRatio: 1.777778 // 16:9\n      };\n      console.log('6. Configuração do scanner:', JSON.stringify(config, null, 2));\n      console.log('7. Verificando elemento do scanner no DOM...');\n      // Pequeno atraso para garantir que o React tenha atualizado o DOM\n      await new Promise(resolve => setTimeout(resolve, 300));\n\n      // Verifica se o elemento existe\n      const scannerElement = document.getElementById('scanner');\n      console.log('8. Elemento do scanner encontrado:', !!scannerElement);\n      if (!scannerElement) {\n        throw new Error('Elemento do scanner não encontrado no DOM');\n      }\n      console.log('9. Limpando conteúdo anterior do scanner...');\n      // Limpa o conteúdo do scanner para evitar duplicações\n      while (scannerElement.firstChild) {\n        scannerElement.removeChild(scannerElement.firstChild);\n      }\n      console.log('10. Criando container do scanner...');\n      // Cria um novo container para o scanner\n      const scannerContainer = document.createElement('div');\n      scannerContainer.id = 'scanner-container';\n      scannerContainer.style.width = '100%';\n      scannerContainer.style.height = '100%';\n      scannerContainer.style.position = 'relative';\n      scannerContainer.style.overflow = 'hidden';\n      scannerElement.appendChild(scannerContainer);\n      console.log('11. Criando nova instância do Html5Qrcode...');\n      const html5QrCode = new Html5Qrcode('scanner-container');\n\n      // Função de sucesso\n      const onScanSuccess = decodedText => {\n        console.log('Código lido com sucesso:', decodedText);\n        setConsulta(decodedText);\n        // Usamos um pequeno atraso para garantir que o scanner capturou tudo\n        setTimeout(() => {\n          pararCamera().then(() => {\n            buscarProduto(decodedText);\n          });\n        }, 100);\n      };\n\n      // Função de erro do scanner\n      const onScanError = error => {\n        // Ignora erros comuns que não são críticos\n        const errorMessage = (error === null || error === void 0 ? void 0 : error.message) || '';\n        const shouldIgnore = errorMessage.includes('No MultiFormat Readers') || errorMessage.includes('No QR code found');\n        if (!shouldIgnore) {\n          console.warn('Aviso do scanner:', error);\n        }\n      };\n      console.log('12. Iniciando tentativa de inicialização da câmera...');\n\n      // Primeiro tenta obter a lista de câmeras disponíveis\n      console.log('12.1. Obtendo lista de câmeras disponíveis...');\n      try {\n        const devices = await Html5Qrcode.getCameras();\n        console.log('12.2. Câmeras disponíveis:', devices);\n        if (devices && devices.length) {\n          // Ordena para tentar primeiro a câmera traseira\n          const sortedDevices = [...devices].sort((a, b) => {\n            // Prioriza câmera traseira\n            if (a.label && (a.label.toLowerCase().includes('back') || a.label.toLowerCase().includes('traseira'))) return -1;\n            if (b.label && (b.label.toLowerCase().includes('back') || b.label.toLowerCase().includes('traseira'))) return 1;\n            return 0;\n          });\n\n          // Tenta cada câmera até encontrar uma que funcione\n          for (const device of sortedDevices) {\n            try {\n              console.log(`12.3. Tentando iniciar câmera: ${device.label || device.id}`);\n              await html5QrCode.start(device.id,\n              // Usa o ID da câmera diretamente\n              config, onScanSuccess, onScanError, false // verbose\n              );\n\n              // Se chegou aqui, a câmera foi iniciada com sucesso\n              html5QrCodeRef.current = html5QrCode;\n              setErroCamera('Aponte para o código QR');\n              setCameraPronta(true);\n              console.log(`12.4. Câmera iniciada com sucesso: ${device.label || device.id}`);\n              return;\n            } catch (cameraError) {\n              console.warn(`12.5. Falha ao iniciar câmera ${device.label || device.id}:`, cameraError);\n              // Continua para a próxima câmera\n            }\n          }\n        }\n      } catch (enumError) {\n        console.warn('12.6. Erro ao listar câmeras, tentando método alternativo...', enumError);\n      }\n\n      // Se não encontrou nenhuma câmera ou todas falharam, tenta o método antigo\n      console.log('12.7. Tentando método alternativo de inicialização...');\n\n      // Tenta com facingMode simplificado\n      try {\n        await html5QrCode.start({\n          facingMode: 'environment'\n        }, config, onScanSuccess, onScanError, false // verbose\n        );\n        html5QrCodeRef.current = html5QrCode;\n        setErroCamera('Aponte para o código QR');\n        setCameraPronta(true);\n        console.log('12.8. Câmera iniciada com sucesso usando facingMode');\n        return;\n      } catch (fallbackError) {\n        console.error('12.9. Falha ao iniciar câmera com facingMode:', fallbackError);\n\n        // Última tentativa com a câmera frontal\n        try {\n          await html5QrCode.start({\n            facingMode: 'user'\n          }, config, onScanSuccess, onScanError, false // verbose\n          );\n          html5QrCodeRef.current = html5QrCode;\n          setErroCamera('Aponte para o código QR (câmera frontal)');\n          setCameraPronta(true);\n          console.log('12.10. Câmera frontal iniciada com sucesso');\n          return;\n        } catch (finalError) {\n          console.error('12.11. Falha ao iniciar câmera frontal:', finalError);\n          throw new Error('Não foi possível acessar nenhuma câmera disponível');\n        }\n      }\n    } catch (err) {\n      console.error('13. ERRO no processo de inicialização da câmera:', err);\n      setErroCamera(`Não foi possível acessar a câmera: ${err.message || 'Erro desconhecido'}`);\n      setMostrarCamera(false);\n\n      // Tenta limpar recursos em caso de erro\n      try {\n        await pararCamera(true);\n      } catch (cleanupError) {\n        console.warn('Erro durante limpeza:', cleanupError);\n      }\n    } finally {\n      console.log('14. Finalizando processo de inicialização da câmera');\n      iniciandoCameraRef.current = false;\n      console.log('=== FIM DO PROCESSO DE INICIALIZAÇÃO ===\\n');\n    }\n  };\n  const pararCamera = async (shouldSuppressErrors = false) => {\n    // Se já estiver parando, não faz nada\n    if (parandoCameraRef.current) {\n      console.log('1.1. Já está em processo de parada, saindo...');\n      return Promise.resolve();\n    }\n    console.log('\\n=== INICIANDO PARADA DA CÂMERA ===');\n    console.log('1. Iniciando processo de parada...');\n    parandoCameraRef.current = true;\n    setCameraPronta(false);\n    try {\n      console.log('2. Verificando se há uma instância ativa do scanner...');\n      if (html5QrCodeRef.current) {\n        console.log('3. Parando o scanner...');\n        try {\n          await html5QrCodeRef.current.stop();\n          console.log('3.1. Scanner parado com sucesso');\n        } catch (stopError) {\n          if (!shouldSuppressErrors) {\n            console.warn('3.2. Aviso ao parar o scanner:', stopError.message);\n          }\n          // Continua mesmo com erro ao parar\n        } finally {\n          // Limpa a referência mesmo se houver erro\n          html5QrCodeRef.current = null;\n        }\n      } else {\n        console.log('3. Nenhuma instância ativa do scanner encontrada');\n      }\n\n      // Limpa o container do scanner\n      console.log('4. Limpando o container do scanner...');\n      const scannerElement = document.getElementById('scanner');\n      if (scannerElement) {\n        console.log('4.1. Removendo elementos filhos do scanner...');\n\n        // Remove todos os filhos do scanner de forma segura\n        try {\n          while (scannerElement.firstChild) {\n            scannerElement.removeChild(scannerElement.firstChild);\n          }\n          console.log('4.2. Limpeza do DOM concluída');\n        } catch (cleanupError) {\n          if (!shouldSuppressErrors) {\n            console.warn('4.3. Aviso ao limpar o scanner:', cleanupError.message);\n          }\n        }\n      } else {\n        console.log('4.1. Elemento do scanner não encontrado no DOM');\n      }\n      console.log('5. Câmera parada com sucesso');\n      return Promise.resolve();\n    } catch (error) {\n      if (!shouldSuppressErrors) {\n        console.error('6. ERRO ao parar a câmera:', {\n          message: error.message,\n          name: error.name,\n          stack: error.stack\n        });\n      }\n      return Promise.reject(error);\n    } finally {\n      console.log('7. Finalizando processo de parada...');\n      setMostrarCamera(false);\n      parandoCameraRef.current = false;\n      console.log('=== FIM DO PROCESSO DE PARADA ===\\n');\n    }\n  };\n  const contarModelosUnicos = imeis => {\n    if (!imeis || !Array.isArray(imeis)) return 0;\n    const modelos = new Set(imeis.map(imei => imei.modelo || '').filter(Boolean));\n    return modelos.size;\n  };\n  const processarDadosDoCluster = dados => {\n    if (!dados || typeof dados !== 'object') {\n      return {\n        erro: 'Dados inválidos',\n        detalhes: 'Os dados recebidos não estão no formato esperado'\n      };\n    }\n\n    // Processa os IMEIs - pode ser um array de strings ou objetos\n    let imeis = [];\n    if (Array.isArray(dados.imeis)) {\n      imeis = dados.imeis.map(imei => {\n        if (typeof imei === 'string') {\n          return {\n            numero: imei\n          };\n        } else if (typeof imei === 'object' && imei !== null) {\n          return {\n            numero: imei.numero || imei.imei || 'N/A',\n            modelo: imei.modelo || 'Desconhecido',\n            status: imei.status || 'ativo'\n          };\n        }\n        return {\n          numero: 'Formato inválido'\n        };\n      });\n    }\n\n    // Cria o objeto de retorno com os dados do cluster\n    const resultado = {\n      id: dados.id || 'N/A',\n      nome: dados.nome || 'Sem nome',\n      descricao: dados.descricao || 'Sem descrição',\n      dataCriacao: dados.data_criacao ? new Date(dados.data_criacao).toLocaleString() : 'Data não disponível',\n      totalImeis: dados.total_imeis || imeis.length,\n      quantidadeImeis: imeis.length,\n      quantidadeModelos: contarModelosUnicos(imeis),\n      imeis: imeis\n    };\n\n    // Adiciona campos adicionais que não foram mapeados\n    const camposIgnorados = ['id', 'nome', 'descricao', 'data_criacao', 'imeis', 'total_imeis', 'created_at', 'updated_at', 'total_imeis'];\n    Object.entries(dados).forEach(([key, value]) => {\n      if (!camposIgnorados.includes(key)) {\n        // Formata valores especiais\n        if (value === null || value === undefined) {\n          resultado[key] = 'N/A';\n        } else if (typeof value === 'object' && !Array.isArray(value)) {\n          resultado[key] = JSON.stringify(value);\n        } else if (Array.isArray(value)) {\n          resultado[key] = value.join(', ');\n        } else if (typeof value === 'boolean') {\n          resultado[key] = value ? 'Sim' : 'Não';\n        } else {\n          resultado[key] = value;\n        }\n      }\n    });\n    return resultado;\n  };\n  const buscarProduto = async codigo => {\n    if (!codigo || !codigo.trim()) {\n      console.error('Código vazio ou inválido');\n      return;\n    }\n\n    // Log para debug\n    console.log('URL da API:', API_ENDPOINTS.CLUSTERS);\n    setCarregando(true);\n    setResultado(null);\n\n    // Cria um controlador para poder cancelar a requisição se necessário\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 10000); // Timeout de 10 segundos\n\n    try {\n      // Tenta fazer o parse do código como JSON\n      try {\n        const dados = JSON.parse(codigo);\n        console.log('Dados do JSON:', dados);\n\n        // Se for um cluster com IMEIs, processa os dados\n        if (dados.imeis || dados.cluster_id) {\n          const dadosProcessados = processarDadosDoCluster(dados);\n          setResultado(dadosProcessados);\n          clearTimeout(timeoutId);\n          return;\n        } else {\n          // Formata os dados para exibição genérica\n          const dadosFormatados = {\n            codigo: dados.codigo || dados.id || 'N/A',\n            descricao: dados.descricao || dados.nome || 'Sem descrição',\n            quantidade: dados.quantidade || dados.qtd || 1,\n            quantidadeModelos: dados.modelos ? Array.isArray(dados.modelos) ? dados.modelos.length : 1 : 1,\n            localizacao: dados.localizacao || dados.local || 'Local não especificado',\n            ultimaAtualizacao: dados.ultimaAtualizacao || new Date().toLocaleString(),\n            // Adiciona campos adicionais dinamicamente\n            ...Object.entries(dados).filter(([key]) => !['codigo', 'descricao', 'quantidade', 'quantidadeModelos', 'localizacao', 'ultimaAtualizacao', 'id', 'nome', 'qtd', 'local', 'modelos', 'imeis'].includes(key)).reduce((acc, [key, value]) => ({\n              ...acc,\n              [key]: typeof value === 'object' ? JSON.stringify(value) : value\n            }), {})\n          };\n          setResultado(dadosFormatados);\n          clearTimeout(timeoutId);\n          return;\n        }\n      } catch (e) {\n        // Se não for um JSON válido, continua para a busca na API\n        console.log('Código não é um JSON válido, tentando buscar na API...');\n      }\n\n      // Se chegou aqui, tenta buscar na API\n      const codigoLimpo = codigo.trim();\n\n      // Verifica se parece ser um UUID ou ID numérico\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n      const isUuid = uuidRegex.test(codigoLimpo);\n      const isNumericId = /^\\d+$/.test(codigoLimpo);\n      if (isUuid || isNumericId) {\n        try {\n          console.log(`Buscando cluster com ID: ${codigoLimpo} em ${API_ENDPOINTS.CLUSTERS}`);\n          const url = `${API_ENDPOINTS.CLUSTERS}/${codigoLimpo}`;\n          console.log('Fazendo requisição para:', url);\n          const response = await fetch(url, {\n            method: 'GET',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json',\n              'ngrok-skip-browser-warning': 'true' // Adiciona header para evitar avisos do ngrok\n            },\n            credentials: 'include',\n            signal: controller.signal,\n            mode: 'cors' // Força o modo CORS\n          });\n          clearTimeout(timeoutId);\n          console.log('Resposta da API:', response);\n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            throw new Error(errorData.message || `Erro ${response.status} ao buscar dados`);\n          }\n          const dados = await response.json();\n          console.log('Dados recebidos da API:', dados);\n          const dadosProcessados = processarDadosDoCluster(dados);\n          setResultado(dadosProcessados);\n          return;\n        } catch (apiError) {\n          // Verifica se foi um erro de timeout ou cancelamento\n          if (apiError.name === 'AbortError') {\n            console.warn('A requisição foi cancelada por timeout');\n            setResultado({\n              erro: 'Tempo limite excedido',\n              detalhes: 'A requisição demorou muito para responder. Verifique sua conexão e tente novamente.',\n              codigoLido: codigoLimpo\n            });\n          } else {\n            console.error('Erro ao buscar dados da API:', apiError);\n            setResultado({\n              erro: 'Erro ao buscar dados',\n              detalhes: apiError.message || 'Não foi possível conectar ao servidor',\n              codigoLido: codigoLimpo\n            });\n          }\n          return;\n        }\n      }\n\n      // Se chegou aqui, é um código simples\n      console.log('Código simples lido:', codigoLimpo);\n      setResultado({\n        codigo: codigoLimpo,\n        descricao: 'Código lido com sucesso',\n        tipo: 'Código simples',\n        dataLeitura: new Date().toLocaleString()\n      });\n    } catch (error) {\n      console.error('Erro ao processar código:', error);\n      setResultado({\n        erro: 'Erro ao processar código',\n        detalhes: error.message || 'Erro desconhecido',\n        codigoLido: codigo\n      });\n    } finally {\n      clearTimeout(timeoutId);\n      setCarregando(false);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    buscarProduto(consulta);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"consultar\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Consultar Etiqueta\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"codigoConsulta\",\n          children: \"C\\xF3digo da Etiqueta:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"codigoConsulta\",\n            value: consulta,\n            onChange: handleChange,\n            placeholder: \"Digite o c\\xF3digo ou escaneie\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 606,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"camera-button\",\n            onClick: mostrarCamera ? pararCamera : iniciarCamera,\n            disabled: carregando,\n            title: mostrarCamera ? 'Parar câmera' : 'Ler código de barras/QR code',\n            children: mostrarCamera ? 'Parar Câmera' : 'Ler Código'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"search-button\",\n            disabled: !consulta.trim() || carregando,\n            children: carregando ? 'Buscando...' : 'Buscar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this), mostrarCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"scanner\",\n        // Força o recarregamento do componente\n        style: {\n          width: '100%',\n          height: '300px'\n        }\n      }, Date.now(), false, {\n        fileName: _jsxFileName,\n        lineNumber: 636,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"camera-instruction\",\n        children: cameraPronta ? 'Posicione o código de barras ou QR code na área de leitura' : 'Iniciando câmera...'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 11\n      }, this), erroCamera && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: erroCamera\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 9\n    }, this), resultado && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"resultado-consulta\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Resultado da Consulta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 652,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detalhes\",\n        children: resultado.erro ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"erro-consulta\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"erro-titulo\",\n            children: [\"\\u274C \", resultado.erro]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 17\n          }, this), resultado.detalhes && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"erro-detalhe\",\n            children: resultado.detalhes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 40\n          }, this), resultado.codigoLido && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"erro-codigo\",\n            children: [\"C\\xF3digo lido: \", /*#__PURE__*/_jsxDEV(\"code\", {\n              children: resultado.codigoLido\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 82\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 42\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cabecalho-consulta\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: resultado.nome || 'Detalhes do Item'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 663,\n              columnNumber: 19\n            }, this), (resultado.quantidadeImeis !== undefined || resultado.quantidadeModelos !== undefined) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"resumo-quantidades\",\n              children: [resultado.quantidadeImeis !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantidade-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-numero\",\n                  children: resultado.quantidadeImeis\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 668,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-rotulo\",\n                  children: \"IMEIs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 669,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 667,\n                columnNumber: 25\n              }, this), resultado.quantidadeModelos !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantidade-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-numero\",\n                  children: resultado.quantidadeModelos\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 674,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-rotulo\",\n                  children: \"Modelos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 675,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detalhes-grid\",\n            children: Object.entries(resultado).filter(([key]) => !['quantidadeModelos', 'codigo'].includes(key)).map(([chave, valor]) => {\n              // Formatação especial para alguns campos\n              if (chave === 'dataCriacao' && valor) {\n                valor = new Date(valor).toLocaleDateString('pt-BR');\n              }\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detalhe-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detalhe-chave\",\n                  children: [chave.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()).replace('Quantidade ', ''), \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 693,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detalhe-valor\",\n                  children: typeof valor === 'boolean' ? valor ? 'Sim' : 'Não' : Array.isArray(valor) ? `${valor.length} itens` : valor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 700,\n                  columnNumber: 27\n                }, this)]\n              }, chave, true, {\n                fileName: _jsxFileName,\n                lineNumber: 692,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 17\n          }, this), resultado.imeis && Array.isArray(resultado.imeis) && resultado.imeis.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lista-imeis\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Lista de IMEIs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tabela-imeis\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cabecalho-tabela\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"IMEI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 717,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Modelo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 718,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 719,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 23\n              }, this), resultado.imeis.slice(0, 5).map((imei, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"linha-imei\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: imei.numero || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: imei.modelo || 'Desconhecido'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 724,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `status ${imei.status || 'ativo'}`,\n                  children: imei.status === 'inativo' ? 'Inativo' : 'Ativo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 725,\n                  columnNumber: 27\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 25\n              }, this)), resultado.imeis.length > 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mais-itens\",\n                children: [\"+\", resultado.imeis.length - 5, \" IMEIs adicionais\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 715,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metadados\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Consulta realizada em: \", new Date().toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 739,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 651,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 600,\n    columnNumber: 5\n  }, this);\n}\n_s(Consultar, \"j6vcNs+qunY+saAjP8Y1OrsAmnE=\");\n_c = Consultar;\nexport default Consultar;\nvar _c;\n$RefreshReg$(_c, \"Consultar\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Html5Qrcode","API_ENDPOINTS","jsxDEV","_jsxDEV","Fragment","_Fragment","Consultar","_s","handleError","event","_event$error","errorMessage","error","message","toLowerCase","shouldIgnore","includes","type","console","warn","timestamp","Date","toISOString","errorListener","e","unhandledRejectionListener","window","addEventListener","removeEventListener","consulta","setConsulta","resultado","setResultado","carregando","setCarregando","mostrarCamera","setMostrarCamera","erroCamera","setErroCamera","cameraPronta","setCameraPronta","iniciandoCameraRef","parandoCameraRef","html5QrCodeRef","handleChange","target","value","log","setTimeout","pararCamera","catch","iniciarCamera","current","navigator","mediaDevices","getUserMedia","Error","video","facingMode","permError","config","fps","qrbox","width","height","experimentalFeatures","useBarCodeDetectorIfSupported","disableFlip","showTorchButtonIfSupported","aspectRatio","JSON","stringify","Promise","resolve","scannerElement","document","getElementById","firstChild","removeChild","scannerContainer","createElement","id","style","position","overflow","appendChild","html5QrCode","onScanSuccess","decodedText","then","buscarProduto","onScanError","devices","getCameras","length","sortedDevices","sort","a","b","label","device","start","cameraError","enumError","fallbackError","finalError","err","cleanupError","shouldSuppressErrors","stop","stopError","name","stack","reject","contarModelosUnicos","imeis","Array","isArray","modelos","Set","map","imei","modelo","filter","Boolean","size","processarDadosDoCluster","dados","erro","detalhes","numero","status","nome","descricao","dataCriacao","data_criacao","toLocaleString","totalImeis","total_imeis","quantidadeImeis","quantidadeModelos","camposIgnorados","Object","entries","forEach","key","undefined","join","codigo","trim","CLUSTERS","controller","AbortController","timeoutId","abort","parse","cluster_id","dadosProcessados","clearTimeout","dadosFormatados","quantidade","qtd","localizacao","local","ultimaAtualizacao","reduce","acc","codigoLimpo","uuidRegex","isUuid","test","isNumericId","url","response","fetch","method","headers","credentials","signal","mode","ok","errorData","json","apiError","codigoLido","tipo","dataLeitura","handleSubmit","preventDefault","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","onChange","placeholder","required","onClick","disabled","title","now","chave","valor","toLocaleDateString","replace","str","toUpperCase","slice","index","_c","$RefreshReg$"],"sources":["C:/Users/mrmst/OneDrive/Documentos/Front End/ClusterWarehouse/src/Components/Consultar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './Consultar.css';\nimport { Html5Qrcode } from 'html5-qrcode';\nimport { API_ENDPOINTS } from '../config';\n\nfunction Consultar() {\n  // Adiciona um manipulador de erros global para este componente\n  useEffect(() => {\n    const handleError = (event) => {\n      // Ignora erros de aborto de requisição e erros de câmera específicos\n      const errorMessage = (event.error?.message || event.message || '').toLowerCase();\n      const shouldIgnore = \n        errorMessage.includes('aborted') ||\n        errorMessage.includes('camera') ||\n        errorMessage.includes('permission') ||\n        event?.type === 'abort';\n      \n      if (shouldIgnore && !errorMessage.includes('critical')) {\n        console.warn('Aviso:', errorMessage || 'Operação interrompida (pode ser esperado)');\n        return;\n      }\n      \n      // Log mais detalhado para erros não ignorados\n      console.error('Erro não tratado:', {\n        error: event.error || event,\n        message: event.message,\n        type: event.type,\n        timestamp: new Date().toISOString()\n      });\n    };\n\n    // Adiciona os listeners\n    const errorListener = (event) => {\n      try {\n        handleError(event);\n      } catch (e) {\n        console.error('Erro no manipulador de erros:', e);\n      }\n    };\n\n    const unhandledRejectionListener = (event) => {\n      try {\n        handleError(event);\n      } catch (e) {\n        console.error('Erro no manipulador de rejeições não tratadas:', e);\n      }\n    };\n\n    window.addEventListener('error', errorListener);\n    window.addEventListener('unhandledrejection', unhandledRejectionListener);\n\n    // Limpa os listeners quando o componente for desmontado\n    return () => {\n      try {\n        window.removeEventListener('error', errorListener);\n        window.removeEventListener('unhandledrejection', unhandledRejectionListener);\n      } catch (e) {\n        console.error('Erro ao remover listeners:', e);\n      }\n    };\n  }, []);\n  const [consulta, setConsulta] = useState('');\n  const [resultado, setResultado] = useState(null);\n  const [carregando, setCarregando] = useState(false);\n  const [mostrarCamera, setMostrarCamera] = useState(false);\n  const [erroCamera, setErroCamera] = useState('');\n  const [cameraPronta, setCameraPronta] = useState(false);\n  \n  // Refs para controle de estado assíncrono\n  const iniciandoCameraRef = useRef(false);\n  const parandoCameraRef = useRef(false);\n  const html5QrCodeRef = useRef(null);\n\n  const handleChange = (e) => {\n    setConsulta(e.target.value);\n  };\n\n  useEffect(() => {\n    // Função para limpar recursos quando o componente for desmontado\n    return () => {\n      console.log('Componente será desmontado, limpando recursos...');\n      // Usamos setTimeout para evitar problemas de sincronização\n      setTimeout(() => {\n        pararCamera(true).catch(() => {\n          // Ignora erros durante a limpeza\n        });\n      }, 0);\n    };\n  }, []);\n\n  const iniciarCamera = async () => {\n    console.log('=== INICIANDO CÂMERA ===');\n    console.log('1. Verificando se já está inicializando...');\n    \n    // Se já estiver inicializando, não faz nada\n    if (iniciandoCameraRef.current) {\n      console.log('1.1. Já está em processo de inicialização, saindo...');\n      return;\n    }\n    \n    console.log('2. Marcando como inicializando...');\n    iniciandoCameraRef.current = true;\n    \n    // Limpa qualquer erro anterior\n    setErroCamera('');\n    \n    try {\n      console.log('3. Verificando suporte a getUserMedia...');\n      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n        throw new Error('Seu navegador não suporta acesso à câmera ou o protocolo não é HTTPS');\n      }\n      \n      console.log('4. Solicitando permissão de câmera...');\n      try {\n        // Primeiro tenta apenas a permissão\n        await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });\n        console.log('4.1. Permissão de câmera concedida');\n      } catch (permError) {\n        console.warn('4.2. Erro ao obter permissão:', permError.message);\n        throw new Error('Permissão de câmera negada');\n      }\n      \n      setMostrarCamera(true);\n      setErroCamera('Preparando a câmera...');\n      \n      console.log('5. Configurando o scanner...');\n      // Configuração mínima\n      const config = { \n        fps: 10,\n        qrbox: { width: 250, height: 250 },\n        experimentalFeatures: {\n          useBarCodeDetectorIfSupported: true\n        },\n        disableFlip: true,\n        showTorchButtonIfSupported: true,\n        // Tenta melhorar a performance\n        aspectRatio: 1.777778 // 16:9\n      };\n      \n      console.log('6. Configuração do scanner:', JSON.stringify(config, null, 2));\n\n      console.log('7. Verificando elemento do scanner no DOM...');\n      // Pequeno atraso para garantir que o React tenha atualizado o DOM\n      await new Promise(resolve => setTimeout(resolve, 300));\n\n      // Verifica se o elemento existe\n      const scannerElement = document.getElementById('scanner');\n      console.log('8. Elemento do scanner encontrado:', !!scannerElement);\n      \n      if (!scannerElement) {\n        throw new Error('Elemento do scanner não encontrado no DOM');\n      }\n\n      console.log('9. Limpando conteúdo anterior do scanner...');\n      // Limpa o conteúdo do scanner para evitar duplicações\n      while (scannerElement.firstChild) {\n        scannerElement.removeChild(scannerElement.firstChild);\n      }\n\n      console.log('10. Criando container do scanner...');\n      // Cria um novo container para o scanner\n      const scannerContainer = document.createElement('div');\n      scannerContainer.id = 'scanner-container';\n      scannerContainer.style.width = '100%';\n      scannerContainer.style.height = '100%';\n      scannerContainer.style.position = 'relative';\n      scannerContainer.style.overflow = 'hidden';\n      scannerElement.appendChild(scannerContainer);\n      \n      console.log('11. Criando nova instância do Html5Qrcode...');\n      const html5QrCode = new Html5Qrcode('scanner-container');\n      \n      // Função de sucesso\n      const onScanSuccess = (decodedText) => {\n        console.log('Código lido com sucesso:', decodedText);\n        setConsulta(decodedText);\n        // Usamos um pequeno atraso para garantir que o scanner capturou tudo\n        setTimeout(() => {\n          pararCamera().then(() => {\n            buscarProduto(decodedText);\n          });\n        }, 100);\n      };\n\n      // Função de erro do scanner\n      const onScanError = (error) => {\n        // Ignora erros comuns que não são críticos\n        const errorMessage = error?.message || '';\n        const shouldIgnore = \n          errorMessage.includes('No MultiFormat Readers') ||\n          errorMessage.includes('No QR code found');\n          \n        if (!shouldIgnore) {\n          console.warn('Aviso do scanner:', error);\n        }\n      };\n\n      console.log('12. Iniciando tentativa de inicialização da câmera...');\n      \n      // Primeiro tenta obter a lista de câmeras disponíveis\n      console.log('12.1. Obtendo lista de câmeras disponíveis...');\n      \n      try {\n        const devices = await Html5Qrcode.getCameras();\n        console.log('12.2. Câmeras disponíveis:', devices);\n        \n        if (devices && devices.length) {\n          // Ordena para tentar primeiro a câmera traseira\n          const sortedDevices = [...devices].sort((a, b) => {\n            // Prioriza câmera traseira\n            if (a.label && (a.label.toLowerCase().includes('back') || a.label.toLowerCase().includes('traseira'))) return -1;\n            if (b.label && (b.label.toLowerCase().includes('back') || b.label.toLowerCase().includes('traseira'))) return 1;\n            return 0;\n          });\n          \n          // Tenta cada câmera até encontrar uma que funcione\n          for (const device of sortedDevices) {\n            try {\n              console.log(`12.3. Tentando iniciar câmera: ${device.label || device.id}`);\n              await html5QrCode.start(\n                device.id, // Usa o ID da câmera diretamente\n                config,\n                onScanSuccess,\n                onScanError,\n                false // verbose\n              );\n              \n              // Se chegou aqui, a câmera foi iniciada com sucesso\n              html5QrCodeRef.current = html5QrCode;\n              setErroCamera('Aponte para o código QR');\n              setCameraPronta(true);\n              console.log(`12.4. Câmera iniciada com sucesso: ${device.label || device.id}`);\n              return;\n              \n            } catch (cameraError) {\n              console.warn(`12.5. Falha ao iniciar câmera ${device.label || device.id}:`, cameraError);\n              // Continua para a próxima câmera\n            }\n          }\n        }\n      } catch (enumError) {\n        console.warn('12.6. Erro ao listar câmeras, tentando método alternativo...', enumError);\n      }\n      \n      // Se não encontrou nenhuma câmera ou todas falharam, tenta o método antigo\n      console.log('12.7. Tentando método alternativo de inicialização...');\n      \n      // Tenta com facingMode simplificado\n      try {\n        await html5QrCode.start(\n          { facingMode: 'environment' },\n          config,\n          onScanSuccess,\n          onScanError,\n          false // verbose\n        );\n        \n        html5QrCodeRef.current = html5QrCode;\n        setErroCamera('Aponte para o código QR');\n        setCameraPronta(true);\n        console.log('12.8. Câmera iniciada com sucesso usando facingMode');\n        return;\n        \n      } catch (fallbackError) {\n        console.error('12.9. Falha ao iniciar câmera com facingMode:', fallbackError);\n        \n        // Última tentativa com a câmera frontal\n        try {\n          await html5QrCode.start(\n            { facingMode: 'user' },\n            config,\n            onScanSuccess,\n            onScanError,\n            false // verbose\n          );\n          \n          html5QrCodeRef.current = html5QrCode;\n          setErroCamera('Aponte para o código QR (câmera frontal)');\n          setCameraPronta(true);\n          console.log('12.10. Câmera frontal iniciada com sucesso');\n          return;\n          \n        } catch (finalError) {\n          console.error('12.11. Falha ao iniciar câmera frontal:', finalError);\n          throw new Error('Não foi possível acessar nenhuma câmera disponível');\n        }\n      }\n      \n    } catch (err) {\n      console.error('13. ERRO no processo de inicialização da câmera:', err);\n      setErroCamera(`Não foi possível acessar a câmera: ${err.message || 'Erro desconhecido'}`);\n      setMostrarCamera(false);\n      \n      // Tenta limpar recursos em caso de erro\n      try {\n        await pararCamera(true);\n      } catch (cleanupError) {\n        console.warn('Erro durante limpeza:', cleanupError);\n      }\n      \n    } finally {\n      console.log('14. Finalizando processo de inicialização da câmera');\n      iniciandoCameraRef.current = false;\n      console.log('=== FIM DO PROCESSO DE INICIALIZAÇÃO ===\\n');\n    }\n  };\n\n  const pararCamera = async (shouldSuppressErrors = false) => {\n    // Se já estiver parando, não faz nada\n    if (parandoCameraRef.current) {\n      console.log('1.1. Já está em processo de parada, saindo...');\n      return Promise.resolve();\n    }\n    \n    console.log('\\n=== INICIANDO PARADA DA CÂMERA ===');\n    console.log('1. Iniciando processo de parada...');\n    \n    parandoCameraRef.current = true;\n    setCameraPronta(false);\n    \n    try {\n      console.log('2. Verificando se há uma instância ativa do scanner...');\n      \n      if (html5QrCodeRef.current) {\n        console.log('3. Parando o scanner...');\n        try {\n          await html5QrCodeRef.current.stop();\n          console.log('3.1. Scanner parado com sucesso');\n        } catch (stopError) {\n          if (!shouldSuppressErrors) {\n            console.warn('3.2. Aviso ao parar o scanner:', stopError.message);\n          }\n          // Continua mesmo com erro ao parar\n        } finally {\n          // Limpa a referência mesmo se houver erro\n          html5QrCodeRef.current = null;\n        }\n      } else {\n        console.log('3. Nenhuma instância ativa do scanner encontrada');\n      }\n      \n      // Limpa o container do scanner\n      console.log('4. Limpando o container do scanner...');\n      const scannerElement = document.getElementById('scanner');\n      \n      if (scannerElement) {\n        console.log('4.1. Removendo elementos filhos do scanner...');\n        \n        // Remove todos os filhos do scanner de forma segura\n        try {\n          while (scannerElement.firstChild) {\n            scannerElement.removeChild(scannerElement.firstChild);\n          }\n          console.log('4.2. Limpeza do DOM concluída');\n        } catch (cleanupError) {\n          if (!shouldSuppressErrors) {\n            console.warn('4.3. Aviso ao limpar o scanner:', cleanupError.message);\n          }\n        }\n      } else {\n        console.log('4.1. Elemento do scanner não encontrado no DOM');\n      }\n      \n      console.log('5. Câmera parada com sucesso');\n      return Promise.resolve();\n      \n    } catch (error) {\n      if (!shouldSuppressErrors) {\n        console.error('6. ERRO ao parar a câmera:', {\n          message: error.message,\n          name: error.name,\n          stack: error.stack\n        });\n      }\n      return Promise.reject(error);\n    } finally {\n      console.log('7. Finalizando processo de parada...');\n      setMostrarCamera(false);\n      parandoCameraRef.current = false;\n      console.log('=== FIM DO PROCESSO DE PARADA ===\\n');\n    }\n  };\n\n  const contarModelosUnicos = (imeis) => {\n    if (!imeis || !Array.isArray(imeis)) return 0;\n    const modelos = new Set(imeis.map(imei => imei.modelo || '').filter(Boolean));\n    return modelos.size;\n  };\n\n  const processarDadosDoCluster = (dados) => {\n    if (!dados || typeof dados !== 'object') {\n      return {\n        erro: 'Dados inválidos',\n        detalhes: 'Os dados recebidos não estão no formato esperado'\n      };\n    }\n\n    // Processa os IMEIs - pode ser um array de strings ou objetos\n    let imeis = [];\n    if (Array.isArray(dados.imeis)) {\n      imeis = dados.imeis.map(imei => {\n        if (typeof imei === 'string') {\n          return { numero: imei };\n        } else if (typeof imei === 'object' && imei !== null) {\n          return {\n            numero: imei.numero || imei.imei || 'N/A',\n            modelo: imei.modelo || 'Desconhecido',\n            status: imei.status || 'ativo'\n          };\n        }\n        return { numero: 'Formato inválido' };\n      });\n    }\n\n    // Cria o objeto de retorno com os dados do cluster\n    const resultado = {\n      id: dados.id || 'N/A',\n      nome: dados.nome || 'Sem nome',\n      descricao: dados.descricao || 'Sem descrição',\n      dataCriacao: dados.data_criacao ? new Date(dados.data_criacao).toLocaleString() : 'Data não disponível',\n      totalImeis: dados.total_imeis || imeis.length,\n      quantidadeImeis: imeis.length,\n      quantidadeModelos: contarModelosUnicos(imeis),\n      imeis: imeis\n    };\n\n    // Adiciona campos adicionais que não foram mapeados\n    const camposIgnorados = [\n      'id', 'nome', 'descricao', 'data_criacao', 'imeis', 'total_imeis',\n      'created_at', 'updated_at', 'total_imeis'\n    ];\n\n    Object.entries(dados).forEach(([key, value]) => {\n      if (!camposIgnorados.includes(key)) {\n        // Formata valores especiais\n        if (value === null || value === undefined) {\n          resultado[key] = 'N/A';\n        } else if (typeof value === 'object' && !Array.isArray(value)) {\n          resultado[key] = JSON.stringify(value);\n        } else if (Array.isArray(value)) {\n          resultado[key] = value.join(', ');\n        } else if (typeof value === 'boolean') {\n          resultado[key] = value ? 'Sim' : 'Não';\n        } else {\n          resultado[key] = value;\n        }\n      }\n    });\n\n    return resultado;\n  };\n\n  const buscarProduto = async (codigo) => {\n    if (!codigo || !codigo.trim()) {\n      console.error('Código vazio ou inválido');\n      return;\n    }\n    \n    // Log para debug\n    console.log('URL da API:', API_ENDPOINTS.CLUSTERS);\n    \n    setCarregando(true);\n    setResultado(null);\n    \n    // Cria um controlador para poder cancelar a requisição se necessário\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), 10000); // Timeout de 10 segundos\n    \n    try {\n      // Tenta fazer o parse do código como JSON\n      try {\n        const dados = JSON.parse(codigo);\n        console.log('Dados do JSON:', dados);\n        \n        // Se for um cluster com IMEIs, processa os dados\n        if (dados.imeis || dados.cluster_id) {\n          const dadosProcessados = processarDadosDoCluster(dados);\n          setResultado(dadosProcessados);\n          clearTimeout(timeoutId);\n          return;\n        } else {\n          // Formata os dados para exibição genérica\n          const dadosFormatados = {\n            codigo: dados.codigo || dados.id || 'N/A',\n            descricao: dados.descricao || dados.nome || 'Sem descrição',\n            quantidade: dados.quantidade || dados.qtd || 1,\n            quantidadeModelos: dados.modelos ? (Array.isArray(dados.modelos) ? dados.modelos.length : 1) : 1,\n            localizacao: dados.localizacao || dados.local || 'Local não especificado',\n            ultimaAtualizacao: dados.ultimaAtualizacao || new Date().toLocaleString(),\n            // Adiciona campos adicionais dinamicamente\n            ...Object.entries(dados)\n              .filter(([key]) => !['codigo', 'descricao', 'quantidade', 'quantidadeModelos', 'localizacao', 'ultimaAtualizacao', 'id', 'nome', 'qtd', 'local', 'modelos', 'imeis'].includes(key))\n              .reduce((acc, [key, value]) => ({\n                ...acc,\n                [key]: typeof value === 'object' ? JSON.stringify(value) : value\n              }), {})\n          };\n          \n          setResultado(dadosFormatados);\n          clearTimeout(timeoutId);\n          return;\n        }\n      } catch (e) {\n        // Se não for um JSON válido, continua para a busca na API\n        console.log('Código não é um JSON válido, tentando buscar na API...');\n      }\n      \n      // Se chegou aqui, tenta buscar na API\n      const codigoLimpo = codigo.trim();\n      \n      // Verifica se parece ser um UUID ou ID numérico\n      const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n      const isUuid = uuidRegex.test(codigoLimpo);\n      const isNumericId = /^\\d+$/.test(codigoLimpo);\n      \n      if (isUuid || isNumericId) {\n        try {\n          console.log(`Buscando cluster com ID: ${codigoLimpo} em ${API_ENDPOINTS.CLUSTERS}`);\n          \n          const url = `${API_ENDPOINTS.CLUSTERS}/${codigoLimpo}`;\n          console.log('Fazendo requisição para:', url);\n          \n          const response = await fetch(url, {\n            method: 'GET',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json',\n              'ngrok-skip-browser-warning': 'true' // Adiciona header para evitar avisos do ngrok\n            },\n            credentials: 'include',\n            signal: controller.signal,\n            mode: 'cors' // Força o modo CORS\n          });\n          \n          clearTimeout(timeoutId);\n          \n          console.log('Resposta da API:', response);\n          \n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            throw new Error(errorData.message || `Erro ${response.status} ao buscar dados`);\n          }\n          \n          const dados = await response.json();\n          console.log('Dados recebidos da API:', dados);\n          \n          const dadosProcessados = processarDadosDoCluster(dados);\n          setResultado(dadosProcessados);\n          return;\n          \n        } catch (apiError) {\n          // Verifica se foi um erro de timeout ou cancelamento\n          if (apiError.name === 'AbortError') {\n            console.warn('A requisição foi cancelada por timeout');\n            setResultado({\n              erro: 'Tempo limite excedido',\n              detalhes: 'A requisição demorou muito para responder. Verifique sua conexão e tente novamente.',\n              codigoLido: codigoLimpo\n            });\n          } else {\n            console.error('Erro ao buscar dados da API:', apiError);\n            setResultado({\n              erro: 'Erro ao buscar dados',\n              detalhes: apiError.message || 'Não foi possível conectar ao servidor',\n              codigoLido: codigoLimpo\n            });\n          }\n          return;\n        }\n      }\n      \n      // Se chegou aqui, é um código simples\n      console.log('Código simples lido:', codigoLimpo);\n      setResultado({\n        codigo: codigoLimpo,\n        descricao: 'Código lido com sucesso',\n        tipo: 'Código simples',\n        dataLeitura: new Date().toLocaleString()\n      });\n      \n    } catch (error) {\n      console.error('Erro ao processar código:', error);\n      setResultado({\n        erro: 'Erro ao processar código',\n        detalhes: error.message || 'Erro desconhecido',\n        codigoLido: codigo\n      });\n    } finally {\n      clearTimeout(timeoutId);\n      setCarregando(false);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    buscarProduto(consulta);\n  };\n\n  return (\n    <div className=\"consultar\">\n      <h2>Consultar Etiqueta</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"codigoConsulta\">Código da Etiqueta:</label>\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              id=\"codigoConsulta\"\n              value={consulta}\n              onChange={handleChange}\n              placeholder=\"Digite o código ou escaneie\"\n              required\n            />\n            <button \n              type=\"button\" \n              className=\"camera-button\"\n              onClick={mostrarCamera ? pararCamera : iniciarCamera}\n              disabled={carregando}\n              title={mostrarCamera ? 'Parar câmera' : 'Ler código de barras/QR code'}\n            >\n              {mostrarCamera ? 'Parar Câmera' : 'Ler Código'}\n            </button>\n            <button \n              type=\"submit\" \n              className=\"search-button\"\n              disabled={!consulta.trim() || carregando}\n            >\n              {carregando ? 'Buscando...' : 'Buscar'}\n            </button>\n          </div>\n        </div>\n      </form>\n\n      {mostrarCamera && (\n        <div className=\"camera-container\">\n          <div \n            id=\"scanner\" \n            key={Date.now()} // Força o recarregamento do componente\n            style={{ width: '100%', height: '300px' }}\n          ></div>\n          <p className=\"camera-instruction\">\n            {cameraPronta \n              ? 'Posicione o código de barras ou QR code na área de leitura'\n              : 'Iniciando câmera...'}\n          </p>\n          {erroCamera && <p className=\"error-message\">{erroCamera}</p>}\n        </div>\n      )}\n\n      {resultado && (\n        <div className=\"resultado-consulta\">\n          <h3>Resultado da Consulta</h3>\n          <div className=\"detalhes\">\n            {resultado.erro ? (\n              <div className=\"erro-consulta\">\n                <p className=\"erro-titulo\">❌ {resultado.erro}</p>\n                {resultado.detalhes && <p className=\"erro-detalhe\">{resultado.detalhes}</p>}\n                {resultado.codigoLido && <p className=\"erro-codigo\">Código lido: <code>{resultado.codigoLido}</code></p>}\n              </div>\n            ) : (\n              <>\n                <div className=\"cabecalho-consulta\">\n                  <h4>{resultado.nome || 'Detalhes do Item'}</h4>\n                  {(resultado.quantidadeImeis !== undefined || resultado.quantidadeModelos !== undefined) && (\n                    <div className=\"resumo-quantidades\">\n                      {resultado.quantidadeImeis !== undefined && (\n                        <div className=\"quantidade-item\">\n                          <span className=\"quantidade-numero\">{resultado.quantidadeImeis}</span>\n                          <span className=\"quantidade-rotulo\">IMEIs</span>\n                        </div>\n                      )}\n                      {resultado.quantidadeModelos !== undefined && (\n                        <div className=\"quantidade-item\">\n                          <span className=\"quantidade-numero\">{resultado.quantidadeModelos}</span>\n                          <span className=\"quantidade-rotulo\">Modelos</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"detalhes-grid\">\n                  {Object.entries(resultado)\n                    .filter(([key]) => !['quantidadeModelos', 'codigo'].includes(key))\n                    .map(([chave, valor]) => {\n                      // Formatação especial para alguns campos\n                      if (chave === 'dataCriacao' && valor) {\n                        valor = new Date(valor).toLocaleDateString('pt-BR');\n                      }\n                      \n                      return (\n                        <div key={chave} className=\"detalhe-item\">\n                          <span className=\"detalhe-chave\">\n                            {chave\n                              .replace(/([A-Z])/g, ' $1')\n                              .replace(/^./, str => str.toUpperCase())\n                              .replace('Quantidade ', '')\n                            }:\n                          </span>\n                          <span className=\"detalhe-valor\">\n                            {typeof valor === 'boolean' \n                              ? (valor ? 'Sim' : 'Não') \n                              : Array.isArray(valor) \n                                ? `${valor.length} itens` \n                                : valor}\n                          </span>\n                        </div>\n                      );\n                    })}\n                </div>\n                \n                {resultado.imeis && Array.isArray(resultado.imeis) && resultado.imeis.length > 0 && (\n                  <div className=\"lista-imeis\">\n                    <h4>Lista de IMEIs</h4>\n                    <div className=\"tabela-imeis\">\n                      <div className=\"cabecalho-tabela\">\n                        <div>IMEI</div>\n                        <div>Modelo</div>\n                        <div>Status</div>\n                      </div>\n                      {resultado.imeis.slice(0, 5).map((imei, index) => (\n                        <div key={index} className=\"linha-imei\">\n                          <div>{imei.numero || 'N/A'}</div>\n                          <div>{imei.modelo || 'Desconhecido'}</div>\n                          <div className={`status ${imei.status || 'ativo'}`}>\n                            {imei.status === 'inativo' ? 'Inativo' : 'Ativo'}\n                          </div>\n                        </div>\n                      ))}\n                      {resultado.imeis.length > 5 && (\n                        <div className=\"mais-itens\">\n                          +{resultado.imeis.length - 5} IMEIs adicionais\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n                \n                <div className=\"metadados\">\n                  <p>Consulta realizada em: {new Date().toLocaleString()}</p>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Consultar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}