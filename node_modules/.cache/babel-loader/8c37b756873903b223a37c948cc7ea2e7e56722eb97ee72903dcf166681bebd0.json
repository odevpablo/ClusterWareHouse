{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mrmst\\\\OneDrive\\\\Documentos\\\\Front End\\\\ClusterWarehouse\\\\src\\\\Components\\\\Consultar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport './Consultar.css';\nimport { Html5Qrcode, Html5QrcodeSupportedFormats } from 'html5-qrcode';\nimport { API_ENDPOINTS } from '../config';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Consultar() {\n  _s();\n  const [consulta, setConsulta] = useState('');\n  const [resultado, setResultado] = useState(null);\n  const [carregando, setCarregando] = useState(false);\n  const [mostrarCamera, setMostrarCamera] = useState(false);\n  const [erroCamera, setErroCamera] = useState('');\n  const html5QrCodeRef = useRef(null);\n  const handleChange = e => {\n    setConsulta(e.target.value);\n  };\n  useEffect(() => {\n    // Limpar o scanner quando o componente for desmontado\n    return () => {\n      if (html5QrCodeRef.current && html5QrCodeRef.current.isScanning) {\n        html5QrCodeRef.current.stop().catch(error => {\n          console.error('Erro ao parar o scanner:', error);\n        });\n      }\n    };\n  }, []);\n  const iniciarCamera = async () => {\n    try {\n      setMostrarCamera(true);\n      setErroCamera('Iniciando câmera...');\n\n      // Pequeno atraso para garantir que o componente seja renderizado\n      await new Promise(resolve => setTimeout(resolve, 100));\n      const scannerElement = document.getElementById('scanner');\n      if (!scannerElement) {\n        throw new Error('Elemento do scanner não encontrado. Por favor, recarregue a página.');\n      }\n\n      // Limpa qualquer instância anterior\n      if (html5QrCodeRef.current) {\n        try {\n          await html5QrCodeRef.current.stop();\n          await html5QrCodeRef.current.clear();\n        } catch (e) {\n          console.warn('Erro ao limpar scanner anterior:', e);\n        }\n      }\n\n      // Cria uma nova instância do scanner\n      html5QrCodeRef.current = new Html5Qrcode('scanner');\n\n      // Configurações otimizadas para escaneamento rápido\n      const config = {\n        fps: 15,\n        // Aumentado para melhorar a taxa de quadros\n        qrbox: {\n          width: 300,\n          // Área de escaneamento maior para capturar mais facilmente\n          height: 300\n        },\n        aspectRatio: 1.0,\n        disableFlip: true,\n        // Desabilita a detecção de rotação para melhorar performance\n        experimentalFeatures: {\n          useBarCodeDetectorIfSupported: true,\n          useBarCodeDetectorIfSupportedConfig: {\n            formats: ['qr_code', 'ean_13', 'code_128'] // Foco nos formatos mais comuns\n          }\n        },\n        // Suporta apenas QR Code para melhor performance\n        formatsToSupport: [Html5QrcodeSupportedFormats.QR_CODE],\n        // Configurações otimizadas para a câmera\n        videoConstraints: {\n          facingMode: {\n            exact: 'environment'\n          },\n          // Força a câmera traseira\n          width: {\n            ideal: 1920\n          },\n          // Maior resolução para melhor detecção\n          height: {\n            ideal: 1080\n          },\n          frameRate: {\n            ideal: 30\n          } // Taxa de quadros mais alta\n        },\n        // Configurações adicionais para melhorar a detecção\n        useNative: true,\n        // Usa o scanner nativo quando disponível\n        showTorchButtonIfSupported: true,\n        // Mostra botão de lanterna se suportado\n        showZoomSliderIfSupported: true,\n        // Mostra controle de zoom se suportado\n        defaultZoomValueIfSupported: 2,\n        // Zoom padrão para melhor foco\n        focusMode: 'continuous',\n        // Foco contínuo para melhor detecção\n        focusDistance: {\n          min: 0,\n          max: 0.2\n        } // Ajuste fino do foco para códigos próximos\n      };\n\n      // Tenta iniciar a câmera traseira com configuração otimizada\n      try {\n        // Adiciona um listener para o evento de scanner pronto\n        html5QrCodeRef.current.start({\n          facingMode: 'environment'\n        }, config, decodedText => {\n          console.log('Código QR escaneado com sucesso!');\n          setConsulta(decodedText);\n          pararCamera();\n          buscarProduto(decodedText);\n        }, errorMessage => {\n          // Filtra apenas erros relevantes para o log\n          if (!['NotFoundException: No MultiFormat Readers were able to detect the code.', 'No QR code found', 'QR code parse error', 'No barcode detector found'].some(msg => errorMessage.includes(msg))) {\n            console.warn('Aviso do scanner:', errorMessage);\n          }\n        },\n        // Adiciona configurações adicionais para melhor performance\n        {\n          rememberLastUsedCamera: true,\n          showTorchButtonIfSupported: true,\n          showZoomSliderIfSupported: true,\n          defaultZoomValueIfSupported: 2\n        }).then(() => {\n          console.log('Scanner iniciado com sucesso!');\n          setErroCamera('Aponte para o código QR');\n        }).catch(async err => {\n          console.warn('Erro ao iniciar câmera traseira, tentando frontal...', err);\n\n          // Tenta com a câmera frontal se a traseira falhar\n          try {\n            await html5QrCodeRef.current.start({\n              facingMode: 'user'\n            }, config, decodedText => {\n              console.log('Código QR escaneado (câmera frontal)');\n              setConsulta(decodedText);\n              pararCamera();\n              buscarProduto(decodedText);\n            }, errorMessage => {\n              // Filtra mensagens de erro comuns\n              if (!['NotFoundException: No MultiFormat Readers were able to detect the code.', 'No QR code found', 'QR code parse error'].some(msg => errorMessage.includes(msg))) {\n                console.warn('Aviso do scanner (frontal):', errorMessage);\n              }\n            });\n          } catch (frontCameraError) {\n            console.error('Erro ao iniciar câmera frontal:', frontCameraError);\n            setErroCamera('Não foi possível acessar nenhuma câmera. Verifique as permissões.');\n          }\n        });\n      } catch (err) {\n        console.error('Erro inesperado ao iniciar o scanner:', err);\n        setErroCamera('Erro ao iniciar o scanner. Por favor, recarregue a página.');\n      }\n    } catch (err) {\n      console.error('Erro ao configurar a câmera:', err);\n      setErroCamera('Não foi possível acessar a câmera. Verifique as permissões do navegador e tente novamente.');\n      if (html5QrCodeRef.current) {\n        html5QrCodeRef.current.clear();\n      }\n    }\n  };\n  const pararCamera = async () => {\n    if (html5QrCodeRef.current) {\n      try {\n        await html5QrCodeRef.current.stop();\n        await html5QrCodeRef.current.clear();\n        html5QrCodeRef.current = null;\n      } catch (err) {\n        console.error('Erro ao parar a câmera:', err);\n      } finally {\n        setMostrarCamera(false);\n      }\n    } else {\n      setMostrarCamera(false);\n    }\n  };\n  const contarModelosUnicos = imeis => {\n    if (!imeis || !Array.isArray(imeis)) return 0;\n    const modelos = new Set(imeis.map(imei => imei.modelo || '').filter(Boolean));\n    return modelos.size;\n  };\n  const processarDadosDoCluster = dados => {\n    if (!dados || typeof dados !== 'object') {\n      return {\n        erro: 'Dados inválidos',\n        detalhes: 'Os dados recebidos não estão no formato esperado'\n      };\n    }\n\n    // Garante que imeis seja um array\n    let imeis = [];\n    if (Array.isArray(dados.imeis)) {\n      imeis = dados.imeis;\n    } else if (dados.imei) {\n      // Se for um único IMEI, converte para array\n      imeis = [dados.imei];\n    }\n    const quantidadeImeis = imeis.length;\n    const quantidadeModelos = contarModelosUnicos(imeis);\n\n    // Cria o objeto de retorno com valores padrão\n    const resultado = {\n      id: dados.id || 'N/A',\n      nome: dados.nome || 'Sem nome',\n      descricao: dados.descricao || 'Sem descrição',\n      quantidadeImeis,\n      quantidadeModelos,\n      dataCriacao: dados.data_criacao || new Date().toISOString().split('T')[0],\n      imeis: []\n    };\n\n    // Adiciona os IMEIs formatados apenas se houver itens\n    if (imeis.length > 0) {\n      resultado.imeis = imeis.map(imei => ({\n        numero: imei && (imei.numero || imei.imei || imei.codigo || 'N/A'),\n        modelo: imei && (imei.modelo || 'Desconhecido'),\n        status: imei && (imei.status || 'ativo')\n      }));\n    }\n\n    // Adiciona outros campos do dados, exceto os já processados\n    Object.entries(dados).forEach(([key, value]) => {\n      if (!['id', 'nome', 'descricao', 'data_criacao', 'imeis', 'imei'].includes(key)) {\n        // Garante que não estamos adicionando objetos não serializáveis\n        resultado[key] = value && typeof value === 'object' && !Array.isArray(value) ? JSON.stringify(value) : value;\n      }\n    });\n\n    // Se houver uma mensagem de IMEIs não exibidos, adiciona ao resultado\n    if (dados.mensagem) {\n      resultado.mensagem = dados.mensagem;\n    }\n    return resultado;\n  };\n  const buscarProduto = async codigo => {\n    if (!codigo.trim()) return;\n    setCarregando(true);\n    try {\n      // Tenta fazer o parse do código como JSON\n      try {\n        const dados = JSON.parse(codigo);\n\n        // Se for um cluster com IMEIs, processa os dados\n        if (dados.imeis || dados.cluster_id) {\n          const dadosProcessados = processarDadosDoCluster(dados);\n          setResultado(dadosProcessados);\n        } else {\n          // Formata os dados para exibição genérica\n          const dadosFormatados = {\n            codigo: dados.codigo || dados.id || 'N/A',\n            descricao: dados.descricao || dados.nome || 'Sem descrição',\n            quantidade: dados.quantidade || dados.qtd || 1,\n            quantidadeModelos: dados.modelos ? Array.isArray(dados.modelos) ? dados.modelos.length : 1 : 1,\n            localizacao: dados.localizacao || dados.local || 'Local não especificado',\n            ultimaAtualizacao: dados.ultimaAtualizacao || new Date().toLocaleString(),\n            // Adiciona campos adicionais dinamicamente\n            ...Object.entries(dados).filter(([key]) => !['codigo', 'descricao', 'quantidade', 'quantidadeModelos', 'localizacao', 'ultimaAtualizacao', 'id', 'nome', 'qtd', 'local', 'modelos', 'imeis'].includes(key)).reduce((acc, [key, value]) => ({\n              ...acc,\n              [key]: typeof value === 'object' ? JSON.stringify(value) : value\n            }), {})\n          };\n          setResultado(dadosFormatados);\n        }\n      } catch (e) {\n        // Se não for um JSON válido, tenta buscar na API\n        console.log('Código não é um JSON válido, tentando buscar na API...');\n\n        // Se for um UUID ou ID de cluster, busca os detalhes na API\n        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n        if (uuidRegex.test(codigo.trim()) || /^\\d+$/.test(codigo.trim())) {\n          try {\n            const response = await fetch(`${API_ENDPOINTS.CLUSTERS}/${codigo.trim()}`, {\n              method: 'GET',\n              headers: {\n                'accept': 'application/json'\n              }\n            });\n            if (response.ok) {\n              const dados = await response.json();\n              const dadosProcessados = processarDadosDoCluster(dados);\n              setResultado(dadosProcessados);\n              return;\n            }\n          } catch (apiError) {\n            console.error('Erro ao buscar dados da API:', apiError);\n          }\n        }\n\n        // Se não encontrou na API, mostra como código simples\n        setResultado({\n          codigo: codigo,\n          descricao: 'Código lido com sucesso',\n          tipo: 'Código simples',\n          dataLeitura: new Date().toLocaleString()\n        });\n      }\n    } catch (error) {\n      console.error('Erro ao processar código:', error);\n      setResultado({\n        erro: 'Erro ao processar o código',\n        detalhes: error.message,\n        codigoLido: codigo\n      });\n    } finally {\n      setCarregando(false);\n    }\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    buscarProduto(consulta);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"consultar\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Consultar Etiqueta\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"codigoConsulta\",\n          children: \"C\\xF3digo da Etiqueta:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"codigoConsulta\",\n            value: consulta,\n            onChange: handleChange,\n            placeholder: \"Digite o c\\xF3digo ou escaneie\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"camera-button\",\n            onClick: mostrarCamera ? pararCamera : iniciarCamera,\n            disabled: carregando,\n            title: mostrarCamera ? 'Parar câmera' : 'Ler código de barras/QR code',\n            children: mostrarCamera ? 'Parar Câmera' : 'Ler Código'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"search-button\",\n            disabled: !consulta.trim() || carregando,\n            children: carregando ? 'Buscando...' : 'Buscar'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this), mostrarCamera && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"camera-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"scanner\",\n        className: \"scanner\"\n      }, mostrarCamera ? 'scanner-active' : 'scanner-inactive', false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"camera-instruction\",\n        children: \"Posicione o c\\xF3digo de barras ou QR code na \\xE1rea de leitura\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this), erroCamera && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: erroCamera\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }, this), resultado && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"resultado-consulta\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Resultado da Consulta\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"detalhes\",\n        children: resultado.erro ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"erro-consulta\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"erro-titulo\",\n            children: [\"\\u274C \", resultado.erro]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 17\n          }, this), resultado.detalhes && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"erro-detalhe\",\n            children: resultado.detalhes\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 40\n          }, this), resultado.codigoLido && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"erro-codigo\",\n            children: [\"C\\xF3digo lido: \", /*#__PURE__*/_jsxDEV(\"code\", {\n              children: resultado.codigoLido\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 82\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 42\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cabecalho-consulta\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: resultado.nome || 'Detalhes do Item'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 19\n            }, this), (resultado.quantidadeImeis !== undefined || resultado.quantidadeModelos !== undefined) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"resumo-quantidades\",\n              children: [resultado.quantidadeImeis !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantidade-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-numero\",\n                  children: resultado.quantidadeImeis\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-rotulo\",\n                  children: \"IMEIs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 25\n              }, this), resultado.quantidadeModelos !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantidade-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-numero\",\n                  children: resultado.quantidadeModelos\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"quantidade-rotulo\",\n                  children: \"Modelos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"detalhes-grid\",\n            children: Object.entries(resultado).filter(([key]) => !['quantidadeModelos', 'codigo'].includes(key)).map(([chave, valor]) => {\n              // Formatação especial para alguns campos\n              if (chave === 'dataCriacao' && valor) {\n                valor = new Date(valor).toLocaleDateString('pt-BR');\n              }\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detalhe-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detalhe-chave\",\n                  children: [chave.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase()).replace('Quantidade ', ''), \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"detalhe-valor\",\n                  children: typeof valor === 'boolean' ? valor ? 'Sim' : 'Não' : Array.isArray(valor) ? `${valor.length} itens` : valor\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 422,\n                  columnNumber: 27\n                }, this)]\n              }, chave, true, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 17\n          }, this), resultado.imeis && Array.isArray(resultado.imeis) && resultado.imeis.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lista-imeis\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Lista de IMEIs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"tabela-imeis\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"cabecalho-tabela\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"IMEI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Modelo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 23\n              }, this), resultado.imeis.slice(0, 5).map((imei, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"linha-imei\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: imei.numero || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: imei.modelo || 'Desconhecido'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `status ${imei.status || 'ativo'}`,\n                  children: imei.status === 'inativo' ? 'Inativo' : 'Ativo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 447,\n                  columnNumber: 27\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 25\n              }, this)), resultado.imeis.length > 5 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mais-itens\",\n                children: [\"+\", resultado.imeis.length - 5, \" IMEIs adicionais\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 453,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"metadados\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Consulta realizada em: \", new Date().toLocaleString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 330,\n    columnNumber: 5\n  }, this);\n}\n_s(Consultar, \"k4qKkdS8iBKNbpbkdtgiNPwRiug=\");\n_c = Consultar;\nexport default Consultar;\nvar _c;\n$RefreshReg$(_c, \"Consultar\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Html5Qrcode","Html5QrcodeSupportedFormats","API_ENDPOINTS","jsxDEV","_jsxDEV","Fragment","_Fragment","Consultar","_s","consulta","setConsulta","resultado","setResultado","carregando","setCarregando","mostrarCamera","setMostrarCamera","erroCamera","setErroCamera","html5QrCodeRef","handleChange","e","target","value","current","isScanning","stop","catch","error","console","iniciarCamera","Promise","resolve","setTimeout","scannerElement","document","getElementById","Error","clear","warn","config","fps","qrbox","width","height","aspectRatio","disableFlip","experimentalFeatures","useBarCodeDetectorIfSupported","useBarCodeDetectorIfSupportedConfig","formats","formatsToSupport","QR_CODE","videoConstraints","facingMode","exact","ideal","frameRate","useNative","showTorchButtonIfSupported","showZoomSliderIfSupported","defaultZoomValueIfSupported","focusMode","focusDistance","min","max","start","decodedText","log","pararCamera","buscarProduto","errorMessage","some","msg","includes","rememberLastUsedCamera","then","err","frontCameraError","contarModelosUnicos","imeis","Array","isArray","modelos","Set","map","imei","modelo","filter","Boolean","size","processarDadosDoCluster","dados","erro","detalhes","quantidadeImeis","length","quantidadeModelos","id","nome","descricao","dataCriacao","data_criacao","Date","toISOString","split","numero","codigo","status","Object","entries","forEach","key","JSON","stringify","mensagem","trim","parse","cluster_id","dadosProcessados","dadosFormatados","quantidade","qtd","localizacao","local","ultimaAtualizacao","toLocaleString","reduce","acc","uuidRegex","test","response","fetch","CLUSTERS","method","headers","ok","json","apiError","tipo","dataLeitura","message","codigoLido","handleSubmit","preventDefault","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","type","onChange","placeholder","required","onClick","disabled","title","undefined","chave","valor","toLocaleDateString","replace","str","toUpperCase","slice","index","_c","$RefreshReg$"],"sources":["C:/Users/mrmst/OneDrive/Documentos/Front End/ClusterWarehouse/src/Components/Consultar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './Consultar.css';\nimport { Html5Qrcode, Html5QrcodeSupportedFormats } from 'html5-qrcode';\nimport { API_ENDPOINTS } from '../config';\n\nfunction Consultar() {\n  const [consulta, setConsulta] = useState('');\n  const [resultado, setResultado] = useState(null);\n  const [carregando, setCarregando] = useState(false);\n  const [mostrarCamera, setMostrarCamera] = useState(false);\n  const [erroCamera, setErroCamera] = useState('');\n  const html5QrCodeRef = useRef(null);\n\n  const handleChange = (e) => {\n    setConsulta(e.target.value);\n  };\n\n  useEffect(() => {\n    // Limpar o scanner quando o componente for desmontado\n    return () => {\n      if (html5QrCodeRef.current && html5QrCodeRef.current.isScanning) {\n        html5QrCodeRef.current.stop().catch(error => {\n          console.error('Erro ao parar o scanner:', error);\n        });\n      }\n    };\n  }, []);\n\n  const iniciarCamera = async () => {\n    try {\n      setMostrarCamera(true);\n      setErroCamera('Iniciando câmera...');\n      \n      // Pequeno atraso para garantir que o componente seja renderizado\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      const scannerElement = document.getElementById('scanner');\n      if (!scannerElement) {\n        throw new Error('Elemento do scanner não encontrado. Por favor, recarregue a página.');\n      }\n      \n      // Limpa qualquer instância anterior\n      if (html5QrCodeRef.current) {\n        try {\n          await html5QrCodeRef.current.stop();\n          await html5QrCodeRef.current.clear();\n        } catch (e) {\n          console.warn('Erro ao limpar scanner anterior:', e);\n        }\n      }\n      \n      // Cria uma nova instância do scanner\n      html5QrCodeRef.current = new Html5Qrcode('scanner');\n      \n      // Configurações otimizadas para escaneamento rápido\n      const config = { \n        fps: 15,  // Aumentado para melhorar a taxa de quadros\n        qrbox: { \n          width: 300,  // Área de escaneamento maior para capturar mais facilmente\n          height: 300\n        },\n        aspectRatio: 1.0,\n        disableFlip: true,  // Desabilita a detecção de rotação para melhorar performance\n        experimentalFeatures: {\n          useBarCodeDetectorIfSupported: true,\n          useBarCodeDetectorIfSupportedConfig: {\n            formats: ['qr_code', 'ean_13', 'code_128']  // Foco nos formatos mais comuns\n          }\n        },\n        // Suporta apenas QR Code para melhor performance\n        formatsToSupport: [Html5QrcodeSupportedFormats.QR_CODE],\n        // Configurações otimizadas para a câmera\n        videoConstraints: {\n          facingMode: { exact: 'environment' },  // Força a câmera traseira\n          width: { ideal: 1920 },  // Maior resolução para melhor detecção\n          height: { ideal: 1080 },\n          frameRate: { ideal: 30 }  // Taxa de quadros mais alta\n        },\n        // Configurações adicionais para melhorar a detecção\n        useNative: true,  // Usa o scanner nativo quando disponível\n        showTorchButtonIfSupported: true,  // Mostra botão de lanterna se suportado\n        showZoomSliderIfSupported: true,   // Mostra controle de zoom se suportado\n        defaultZoomValueIfSupported: 2,    // Zoom padrão para melhor foco\n        focusMode: 'continuous',           // Foco contínuo para melhor detecção\n        focusDistance: { min: 0, max: 0.2 } // Ajuste fino do foco para códigos próximos\n      };\n      \n      // Tenta iniciar a câmera traseira com configuração otimizada\n      try {\n        // Adiciona um listener para o evento de scanner pronto\n        html5QrCodeRef.current.start(\n          { facingMode: 'environment' },\n          config,\n          (decodedText) => {\n            console.log('Código QR escaneado com sucesso!');\n            setConsulta(decodedText);\n            pararCamera();\n            buscarProduto(decodedText);\n          },\n          (errorMessage) => {\n            // Filtra apenas erros relevantes para o log\n            if (![\n              'NotFoundException: No MultiFormat Readers were able to detect the code.',\n              'No QR code found',\n              'QR code parse error',\n              'No barcode detector found'\n            ].some(msg => errorMessage.includes(msg))) {\n              console.warn('Aviso do scanner:', errorMessage);\n            }\n          },\n          // Adiciona configurações adicionais para melhor performance\n          {\n            rememberLastUsedCamera: true,\n            showTorchButtonIfSupported: true,\n            showZoomSliderIfSupported: true,\n            defaultZoomValueIfSupported: 2\n          }\n        ).then(() => {\n          console.log('Scanner iniciado com sucesso!');\n          setErroCamera('Aponte para o código QR');\n        }).catch(async (err) => {\n          console.warn('Erro ao iniciar câmera traseira, tentando frontal...', err);\n          \n          // Tenta com a câmera frontal se a traseira falhar\n          try {\n            await html5QrCodeRef.current.start(\n              { facingMode: 'user' },\n              config,\n              (decodedText) => {\n                console.log('Código QR escaneado (câmera frontal)');\n                setConsulta(decodedText);\n                pararCamera();\n                buscarProduto(decodedText);\n              },\n              (errorMessage) => {\n                // Filtra mensagens de erro comuns\n                if (![\n                  'NotFoundException: No MultiFormat Readers were able to detect the code.',\n                  'No QR code found',\n                  'QR code parse error'\n                ].some(msg => errorMessage.includes(msg))) {\n                  console.warn('Aviso do scanner (frontal):', errorMessage);\n                }\n              }\n            );\n          } catch (frontCameraError) {\n            console.error('Erro ao iniciar câmera frontal:', frontCameraError);\n            setErroCamera('Não foi possível acessar nenhuma câmera. Verifique as permissões.');\n          }\n        });\n      } catch (err) {\n        console.error('Erro inesperado ao iniciar o scanner:', err);\n        setErroCamera('Erro ao iniciar o scanner. Por favor, recarregue a página.');\n      }\n    } catch (err) {\n      console.error('Erro ao configurar a câmera:', err);\n      setErroCamera('Não foi possível acessar a câmera. Verifique as permissões do navegador e tente novamente.');\n      if (html5QrCodeRef.current) {\n        html5QrCodeRef.current.clear();\n      }\n    }\n  };\n\n  const pararCamera = async () => {\n    if (html5QrCodeRef.current) {\n      try {\n        await html5QrCodeRef.current.stop();\n        await html5QrCodeRef.current.clear();\n        html5QrCodeRef.current = null;\n      } catch (err) {\n        console.error('Erro ao parar a câmera:', err);\n      } finally {\n        setMostrarCamera(false);\n      }\n    } else {\n      setMostrarCamera(false);\n    }\n  };\n\n  const contarModelosUnicos = (imeis) => {\n    if (!imeis || !Array.isArray(imeis)) return 0;\n    const modelos = new Set(imeis.map(imei => imei.modelo || '').filter(Boolean));\n    return modelos.size;\n  };\n\n  const processarDadosDoCluster = (dados) => {\n    if (!dados || typeof dados !== 'object') {\n      return {\n        erro: 'Dados inválidos',\n        detalhes: 'Os dados recebidos não estão no formato esperado'\n      };\n    }\n\n    // Garante que imeis seja um array\n    let imeis = [];\n    if (Array.isArray(dados.imeis)) {\n      imeis = dados.imeis;\n    } else if (dados.imei) {\n      // Se for um único IMEI, converte para array\n      imeis = [dados.imei];\n    }\n\n    const quantidadeImeis = imeis.length;\n    const quantidadeModelos = contarModelosUnicos(imeis);\n    \n    // Cria o objeto de retorno com valores padrão\n    const resultado = {\n      id: dados.id || 'N/A',\n      nome: dados.nome || 'Sem nome',\n      descricao: dados.descricao || 'Sem descrição',\n      quantidadeImeis,\n      quantidadeModelos,\n      dataCriacao: dados.data_criacao || new Date().toISOString().split('T')[0],\n      imeis: []\n    };\n\n    // Adiciona os IMEIs formatados apenas se houver itens\n    if (imeis.length > 0) {\n      resultado.imeis = imeis.map(imei => ({\n        numero: imei && (imei.numero || imei.imei || imei.codigo || 'N/A'),\n        modelo: imei && (imei.modelo || 'Desconhecido'),\n        status: imei && (imei.status || 'ativo')\n      }));\n    }\n\n    // Adiciona outros campos do dados, exceto os já processados\n    Object.entries(dados).forEach(([key, value]) => {\n      if (!['id', 'nome', 'descricao', 'data_criacao', 'imeis', 'imei'].includes(key)) {\n        // Garante que não estamos adicionando objetos não serializáveis\n        resultado[key] = value && typeof value === 'object' && !Array.isArray(value) \n          ? JSON.stringify(value) \n          : value;\n      }\n    });\n\n    // Se houver uma mensagem de IMEIs não exibidos, adiciona ao resultado\n    if (dados.mensagem) {\n      resultado.mensagem = dados.mensagem;\n    }\n\n    return resultado;\n  };\n\n  const buscarProduto = async (codigo) => {\n    if (!codigo.trim()) return;\n    \n    setCarregando(true);\n    \n    try {\n      // Tenta fazer o parse do código como JSON\n      try {\n        const dados = JSON.parse(codigo);\n        \n        // Se for um cluster com IMEIs, processa os dados\n        if (dados.imeis || dados.cluster_id) {\n          const dadosProcessados = processarDadosDoCluster(dados);\n          setResultado(dadosProcessados);\n        } else {\n          // Formata os dados para exibição genérica\n          const dadosFormatados = {\n            codigo: dados.codigo || dados.id || 'N/A',\n            descricao: dados.descricao || dados.nome || 'Sem descrição',\n            quantidade: dados.quantidade || dados.qtd || 1,\n            quantidadeModelos: dados.modelos ? (Array.isArray(dados.modelos) ? dados.modelos.length : 1) : 1,\n            localizacao: dados.localizacao || dados.local || 'Local não especificado',\n            ultimaAtualizacao: dados.ultimaAtualizacao || new Date().toLocaleString(),\n            // Adiciona campos adicionais dinamicamente\n            ...Object.entries(dados)\n              .filter(([key]) => !['codigo', 'descricao', 'quantidade', 'quantidadeModelos', 'localizacao', 'ultimaAtualizacao', 'id', 'nome', 'qtd', 'local', 'modelos', 'imeis'].includes(key))\n              .reduce((acc, [key, value]) => ({\n                ...acc,\n                [key]: typeof value === 'object' ? JSON.stringify(value) : value\n              }), {})\n          };\n          \n          setResultado(dadosFormatados);\n        }\n      } catch (e) {\n        // Se não for um JSON válido, tenta buscar na API\n        console.log('Código não é um JSON válido, tentando buscar na API...');\n        \n        // Se for um UUID ou ID de cluster, busca os detalhes na API\n        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n        if (uuidRegex.test(codigo.trim()) || /^\\d+$/.test(codigo.trim())) {\n          try {\n            const response = await fetch(`${API_ENDPOINTS.CLUSTERS}/${codigo.trim()}`, {\n              method: 'GET',\n              headers: {\n                'accept': 'application/json'\n              }\n            });\n            if (response.ok) {\n              const dados = await response.json();\n              const dadosProcessados = processarDadosDoCluster(dados);\n              setResultado(dadosProcessados);\n              return;\n            }\n          } catch (apiError) {\n            console.error('Erro ao buscar dados da API:', apiError);\n          }\n        }\n        \n        // Se não encontrou na API, mostra como código simples\n        setResultado({\n          codigo: codigo,\n          descricao: 'Código lido com sucesso',\n          tipo: 'Código simples',\n          dataLeitura: new Date().toLocaleString()\n        });\n      }\n      \n    } catch (error) {\n      console.error('Erro ao processar código:', error);\n      setResultado({\n        erro: 'Erro ao processar o código',\n        detalhes: error.message,\n        codigoLido: codigo\n      });\n    } finally {\n      setCarregando(false);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    buscarProduto(consulta);\n  };\n\n  return (\n    <div className=\"consultar\">\n      <h2>Consultar Etiqueta</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"codigoConsulta\">Código da Etiqueta:</label>\n          <div className=\"search-container\">\n            <input\n              type=\"text\"\n              id=\"codigoConsulta\"\n              value={consulta}\n              onChange={handleChange}\n              placeholder=\"Digite o código ou escaneie\"\n              required\n            />\n            <button \n              type=\"button\" \n              className=\"camera-button\"\n              onClick={mostrarCamera ? pararCamera : iniciarCamera}\n              disabled={carregando}\n              title={mostrarCamera ? 'Parar câmera' : 'Ler código de barras/QR code'}\n            >\n              {mostrarCamera ? 'Parar Câmera' : 'Ler Código'}\n            </button>\n            <button \n              type=\"submit\" \n              className=\"search-button\"\n              disabled={!consulta.trim() || carregando}\n            >\n              {carregando ? 'Buscando...' : 'Buscar'}\n            </button>\n          </div>\n        </div>\n      </form>\n\n      {mostrarCamera && (\n        <div className=\"camera-container\">\n          <div id=\"scanner\" key={mostrarCamera ? 'scanner-active' : 'scanner-inactive'} className=\"scanner\"></div>\n          <p className=\"camera-instruction\">Posicione o código de barras ou QR code na área de leitura</p>\n          {erroCamera && <p className=\"error-message\">{erroCamera}</p>}\n        </div>\n      )}\n\n      {resultado && (\n        <div className=\"resultado-consulta\">\n          <h3>Resultado da Consulta</h3>\n          <div className=\"detalhes\">\n            {resultado.erro ? (\n              <div className=\"erro-consulta\">\n                <p className=\"erro-titulo\">❌ {resultado.erro}</p>\n                {resultado.detalhes && <p className=\"erro-detalhe\">{resultado.detalhes}</p>}\n                {resultado.codigoLido && <p className=\"erro-codigo\">Código lido: <code>{resultado.codigoLido}</code></p>}\n              </div>\n            ) : (\n              <>\n                <div className=\"cabecalho-consulta\">\n                  <h4>{resultado.nome || 'Detalhes do Item'}</h4>\n                  {(resultado.quantidadeImeis !== undefined || resultado.quantidadeModelos !== undefined) && (\n                    <div className=\"resumo-quantidades\">\n                      {resultado.quantidadeImeis !== undefined && (\n                        <div className=\"quantidade-item\">\n                          <span className=\"quantidade-numero\">{resultado.quantidadeImeis}</span>\n                          <span className=\"quantidade-rotulo\">IMEIs</span>\n                        </div>\n                      )}\n                      {resultado.quantidadeModelos !== undefined && (\n                        <div className=\"quantidade-item\">\n                          <span className=\"quantidade-numero\">{resultado.quantidadeModelos}</span>\n                          <span className=\"quantidade-rotulo\">Modelos</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"detalhes-grid\">\n                  {Object.entries(resultado)\n                    .filter(([key]) => !['quantidadeModelos', 'codigo'].includes(key))\n                    .map(([chave, valor]) => {\n                      // Formatação especial para alguns campos\n                      if (chave === 'dataCriacao' && valor) {\n                        valor = new Date(valor).toLocaleDateString('pt-BR');\n                      }\n                      \n                      return (\n                        <div key={chave} className=\"detalhe-item\">\n                          <span className=\"detalhe-chave\">\n                            {chave\n                              .replace(/([A-Z])/g, ' $1')\n                              .replace(/^./, str => str.toUpperCase())\n                              .replace('Quantidade ', '')\n                            }:\n                          </span>\n                          <span className=\"detalhe-valor\">\n                            {typeof valor === 'boolean' \n                              ? (valor ? 'Sim' : 'Não') \n                              : Array.isArray(valor) \n                                ? `${valor.length} itens` \n                                : valor}\n                          </span>\n                        </div>\n                      );\n                    })}\n                </div>\n                \n                {resultado.imeis && Array.isArray(resultado.imeis) && resultado.imeis.length > 0 && (\n                  <div className=\"lista-imeis\">\n                    <h4>Lista de IMEIs</h4>\n                    <div className=\"tabela-imeis\">\n                      <div className=\"cabecalho-tabela\">\n                        <div>IMEI</div>\n                        <div>Modelo</div>\n                        <div>Status</div>\n                      </div>\n                      {resultado.imeis.slice(0, 5).map((imei, index) => (\n                        <div key={index} className=\"linha-imei\">\n                          <div>{imei.numero || 'N/A'}</div>\n                          <div>{imei.modelo || 'Desconhecido'}</div>\n                          <div className={`status ${imei.status || 'ativo'}`}>\n                            {imei.status === 'inativo' ? 'Inativo' : 'Ativo'}\n                          </div>\n                        </div>\n                      ))}\n                      {resultado.imeis.length > 5 && (\n                        <div className=\"mais-itens\">\n                          +{resultado.imeis.length - 5} IMEIs adicionais\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n                \n                <div className=\"metadados\">\n                  <p>Consulta realizada em: {new Date().toLocaleString()}</p>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Consultar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}