{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mrmst\\\\OneDrive\\\\Documentos\\\\Front End\\\\ClusterWarehouse\\\\src\\\\Components\\\\CriarEtiqueta.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport * as XLSX from 'xlsx';\nimport { API_ENDPOINTS } from '../config';\nimport './CriarEtiqueta.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CriarEtiqueta() {\n  _s();\n  const [imei, setImei] = useState('');\n  const [excelData, setExcelData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [progress, setProgress] = useState({\n    total: 0,\n    processed: 0,\n    success: 0,\n    errors: 0\n  });\n  const [clusterId, setClusterId] = useState(null);\n  const [isGeneratingQrCode, setIsGeneratingQrCode] = useState(false);\n  const [qrCodeImage, setQrCodeImage] = useState(null);\n\n  // Função auxiliar para fazer o download da imagem\n  const downloadImage = useCallback((url, filename) => {\n    try {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename || `qrcode-${clusterId || 'download'}.png`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n\n      // Se for uma URL de blob, limpa o objeto URL após o download\n      if (url.startsWith('blob:')) {\n        setTimeout(() => URL.revokeObjectURL(url), 100);\n      }\n    } catch (error) {\n      console.error('Erro ao baixar a imagem:', error);\n      alert('Erro ao baixar o QR code. Por favor, tente novamente.');\n    }\n  }, [clusterId]);\n  const fileInputRef = useRef(null);\n\n  // Limpar o progresso quando os dados do Excel forem alterados\n  useEffect(() => {\n    if (excelData.length === 0) {\n      setProgress({\n        total: 0,\n        processed: 0,\n        success: 0,\n        errors: 0\n      });\n    }\n  }, [excelData]);\n  const handleGenerateQrCode = async () => {\n    if (!clusterId) {\n      console.error('Nenhum clusterId disponível');\n      alert('Erro: Nenhum clusterId disponível para gerar o QR code');\n      return;\n    }\n    console.log('Iniciando geração do QR code para o cluster:', clusterId);\n    setIsGeneratingQrCode(true);\n    setQrCodeImage(null); // Limpa a imagem anterior\n\n    try {\n      // URL do QR code com cache busting\n      const url = API_ENDPOINTS.CLUSTER_QRCODE(clusterId);\n      const urlWithCacheBust = `${url}${url.includes('?') ? '&' : '?'}_=${Date.now()}`;\n      console.log('Tentando carregar QR code de:', urlWithCacheBust);\n\n      // Tenta fazer o download da imagem primeiro\n      const response = await fetch(urlWithCacheBust, {\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n          'Accept': 'image/png,image/*;q=0.8',\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`Erro ao carregar o QR code: ${response.status} ${response.statusText}`);\n      }\n      const blob = await response.blob();\n      if (!blob || blob.size === 0) {\n        throw new Error('A resposta do servidor está vazia');\n      }\n\n      // Cria uma URL temporária para o blob\n      const blobUrl = URL.createObjectURL(blob);\n\n      // Verifica se a imagem é válida\n      const img = new Image();\n      await new Promise((resolve, reject) => {\n        img.onload = () => {\n          if (img.width > 0 && img.height > 0) {\n            resolve();\n          } else {\n            reject(new Error('A imagem carregada tem dimensões inválidas'));\n          }\n        };\n        img.onerror = () => reject(new Error('Falha ao carregar a imagem'));\n        img.src = blobUrl;\n      });\n\n      // Se chegou até aqui, a imagem é válida\n      setQrCodeImage(blobUrl);\n    } catch (error) {\n      console.error('Erro ao gerar QR code:', error);\n      alert(`Erro ao gerar QR code: ${error.message}.\\n\\nTentando abrir em uma nova janela...`);\n\n      // Tenta abrir em uma nova janela como fallback\n      const fallbackUrl = `${API_ENDPOINTS.CLUSTER_QRCODE(clusterId)}?${Date.now()}`;\n      window.open(fallbackUrl, '_blank');\n    } finally {\n      setIsGeneratingQrCode(false);\n    }\n  };\n  const handleImeiChange = e => {\n    setImei(e.target.value);\n  };\n  const enviarLoteParaAPI = async (lote, loteIndex, totalLotes) => {\n    try {\n      const response = await fetch(API_ENDPOINTS.CLUSTERS, {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          nome: `Lote ${loteIndex + 1} de ${totalLotes}`,\n          imeis: lote,\n          descricao: `Lote ${loteIndex + 1} de IMEIs processados`\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`Erro no lote ${loteIndex + 1}: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.cluster_id) {\n        setClusterId(data.cluster_id);\n      }\n      return {\n        success: true,\n        data\n      };\n    } catch (error) {\n      console.error(`Erro no lote ${loteIndex + 1}:`, error);\n      return {\n        success: false,\n        error,\n        imeis: lote\n      };\n    }\n  };\n  const processarIMEsEmLotes = async (imeis, tamanhoLote = 10) => {\n    const lotes = [];\n    for (let i = 0; i < imeis.length; i += tamanhoLote) {\n      lotes.push(imeis.slice(i, i + tamanhoLote));\n    }\n    const resultados = [];\n    const totalLotes = lotes.length;\n    for (let i = 0; i < lotes.length; i++) {\n      const lote = lotes[i];\n      setProgress(prev => ({\n        ...prev,\n        loteAtual: i + 1,\n        totalLotes\n      }));\n      const resultado = await enviarLoteParaAPI(lote, i, totalLotes);\n      resultados.push(resultado);\n      setProgress(prev => ({\n        ...prev,\n        processed: prev.processed + lote.length,\n        success: resultado.success ? prev.success + lote.length : prev.success,\n        errors: !resultado.success ? prev.errors + lote.length : prev.errors\n      }));\n    }\n    return resultados;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (isLoading) return;\n    try {\n      if (imei.trim()) {\n        // Processar apenas o IMEI digitado\n        const imeiUnico = imei.trim();\n        console.log('Processando IMEI:', imeiUnico);\n        setIsLoading(true);\n        setProgress({\n          total: 1,\n          processed: 0,\n          success: 0,\n          errors: 0\n        });\n\n        // Criar um arquivo CSV temporário com o IMEI\n        const csvContent = `IMEI\\n${imeiUnico}`;\n        const blob = new Blob([csvContent], {\n          type: 'text/csv'\n        });\n        const file = new File([blob], 'imei.csv', {\n          type: 'text/csv'\n        });\n\n        // Processar o arquivo CSV\n        await processarArquivoCSV(file);\n        setImei('');\n      } else if (excelData.length > 0) {\n        // Se houver dados do Excel, converter para CSV e enviar\n        const csvContent = ['IMEI',\n        // Cabeçalho\n        ...excelData.map(item => (item.IMEI || item.imei || item.Imei || '').trim()).filter(Boolean)].join('\\n');\n        const blob = new Blob([csvContent], {\n          type: 'text/csv'\n        });\n        const file = new File([blob], 'imeis.csv', {\n          type: 'text/csv'\n        });\n        await processarArquivoCSV(file);\n        handleClearFile();\n      } else {\n        alert('Por favor, insira um IMEI, carregue um arquivo CSV ou Excel.');\n      }\n    } catch (error) {\n      console.error('Erro ao processar:', error);\n      alert(error.message || 'Ocorreu um erro ao processar. Verifique o console para mais detalhes.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const processarArquivoCSV = async file => {\n    setIsLoading(true);\n    setProgress({\n      total: 1,\n      processed: 0,\n      success: 0,\n      errors: 0\n    });\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const url = new URL(API_ENDPOINTS.PROCESSAR_CSV);\n      url.searchParams.append('criar_cluster_automatico', 'true');\n      url.searchParams.append('nome_cluster', 'Cluster gerado a partir de CSV');\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json'\n        },\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`Erro ao processar o arquivo: ${response.statusText}`);\n      }\n      const result = await response.json();\n      console.log('Arquivo processado com sucesso:', result);\n\n      // Atualiza o estado do clusterId se estiver na resposta\n      if (result.cluster_id) {\n        setClusterId(result.cluster_id);\n      }\n      setProgress(prev => ({\n        ...prev,\n        processed: 1,\n        success: 1\n      }));\n      return result;\n    } catch (error) {\n      console.error('Erro ao processar o arquivo:', error);\n      setProgress(prev => ({\n        ...prev,\n        errors: 1\n      }));\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleFileUpload = async e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    try {\n      // Verifica se é um arquivo CSV\n      if (!file.name.endsWith('.csv') && !file.type.includes('csv')) {\n        throw new Error('Por favor, selecione um arquivo CSV.');\n      }\n\n      // Processa o arquivo CSV diretamente\n      await processarArquivoCSV(file);\n\n      // Limpa o input de arquivo\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('Erro:', error);\n      alert(error.message || 'Erro ao processar o arquivo. Verifique o console para mais detalhes.');\n    }\n  };\n  const handleClearFile = () => {\n    setExcelData([]);\n    setImei('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"criar-etiqueta\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Gerar Etiqueta de IMEI\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"importar-excel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Importar IMEIs do Excel/CSV\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".csv, .xlsx, .xls\",\n        onChange: handleFileUpload,\n        ref: fileInputRef,\n        style: {\n          display: 'none'\n        },\n        id: \"file-upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-upload-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"file-upload-button\",\n          onClick: () => document.getElementById('file-upload').click(),\n          children: isLoading ? 'Processando...' : 'Selecionar Arquivo (CSV/Excel)'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), excelData.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [excelData.length, \" IMEIs carregados\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"clear-button\",\n            onClick: handleClearFile,\n            children: \"Limpar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"divider\",\n      children: \"ou\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"imei\",\n          children: \"IMEI:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"imei\",\n          name: \"imei\",\n          value: imei,\n          onChange: handleImeiChange,\n          required: excelData.length === 0,\n          disabled: excelData.length > 0,\n          placeholder: \"Digite o n\\xFAmero do IMEI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-button\",\n          disabled: isLoading,\n          children: isLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Processando... \", progress.processed, \"/\", progress.total]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this) : excelData.length > 0 ? `Gerar ${excelData.length} Etiquetas` : 'Processar IMEIs'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), isLoading && progress.total > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Processando: \", progress.processed, \" de \", progress.total, \" IMEIs\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-bar-fill\",\n              style: {\n                width: `${progress.processed / progress.total * 100}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Sucesso: \", progress.success, \" | Erros: \", progress.errors]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), progress.loteAtual && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-info\",\n            children: [\"Lote \", progress.loteAtual, \" de \", progress.totalLotes, \" \\u2022 Sucessos: \", progress.success, \" \\u2022 Erros: \", progress.errors]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"qr-code-button-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `criar-etiqueta-btn ${!clusterId || isGeneratingQrCode ? 'disabled' : ''}`,\n            onClick: handleGenerateQrCode,\n            disabled: !clusterId || isGeneratingQrCode,\n            title: !clusterId ? 'Aguardando processamento...' : '',\n            children: isGeneratingQrCode ? 'Gerando QR Code...' : 'Gerar QR Code'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 13\n          }, this), qrCodeImage && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"qr-code-preview\",\n            style: {\n              marginTop: '20px',\n              textAlign: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"QR Code Gerado:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: '1px solid #e0e0e0',\n                borderRadius: '8px',\n                padding: '20px',\n                margin: '15px 0',\n                backgroundColor: '#f9f9f9',\n                boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  maxWidth: '300px',\n                  margin: '0 auto',\n                  padding: '15px',\n                  backgroundColor: 'white',\n                  borderRadius: '4px',\n                  border: '1px solid #ddd',\n                  textAlign: 'center'\n                },\n                children: isGeneratingQrCode ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '20px',\n                    color: '#666'\n                  },\n                  children: \"Gerando QR Code...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 23\n                }, this) : qrCodeImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: qrCodeImage,\n                  alt: \"QR Code do Cluster\",\n                  style: {\n                    maxWidth: '100%',\n                    height: 'auto',\n                    display: 'block',\n                    margin: '0 auto'\n                  },\n                  onError: e => {\n                    console.error('Erro ao carregar a imagem:', e);\n                    alert('Não foi possível carregar o QR Code. Tente novamente ou baixe manualmente.');\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: '20px',\n                    color: '#666'\n                  },\n                  children: \"Clique em \\\"Gerar QR Code\\\" para visualizar\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 455,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '15px',\n                  fontSize: '0.9em',\n                  color: '#666',\n                  wordBreak: 'break-all',\n                  textAlign: 'left',\n                  padding: '10px',\n                  backgroundColor: '#f0f0f0',\n                  borderRadius: '4px',\n                  maxHeight: '100px',\n                  overflowY: 'auto'\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"URL:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 26\n                  }, this), \" \", qrCodeImage.length > 50 ? qrCodeImage.substring(0, 50) + '...' : qrCodeImage]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"qr-code-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"download-qr-btn\",\n                onClick: async e => {\n                  e.preventDefault();\n                  try {\n                    console.log('Iniciando download do QR code:', qrCodeImage);\n\n                    // Se for uma URL de blob, faz o download diretamente\n                    if (qrCodeImage.startsWith('blob:')) {\n                      // Cria um link temporário para o download\n                      const response = await fetch(qrCodeImage);\n                      const blob = await response.blob();\n                      const downloadUrl = URL.createObjectURL(blob);\n                      const a = document.createElement('a');\n                      a.href = downloadUrl;\n                      a.download = `qrcode-${clusterId}.png`;\n                      document.body.appendChild(a);\n                      a.click();\n\n                      // Limpa o objeto URL após o download\n                      setTimeout(() => {\n                        document.body.removeChild(a);\n                        URL.revokeObjectURL(downloadUrl);\n                      }, 100);\n                      return;\n                    }\n\n                    // Se for uma URL remota, tenta baixar diretamente\n                    const response = await fetch(qrCodeImage, {\n                      credentials: 'include',\n                      cache: 'no-cache'\n                    });\n                    if (!response.ok) {\n                      throw new Error(`Erro ao baixar a imagem: ${response.status} ${response.statusText}`);\n                    }\n                    const blob = await response.blob();\n                    const downloadUrl = URL.createObjectURL(blob);\n                    const a = document.createElement('a');\n                    a.href = downloadUrl;\n                    a.download = `qrcode-${clusterId}.png`;\n                    document.body.appendChild(a);\n                    a.click();\n\n                    // Limpa o objeto URL após o download\n                    setTimeout(() => {\n                      document.body.removeChild(a);\n                      URL.revokeObjectURL(downloadUrl);\n                    }, 100);\n                  } catch (error) {\n                    console.error('Erro ao baixar o QR code:', error);\n                    alert(`Erro ao baixar o QR code: ${error.message}`);\n                  }\n                },\n                children: \"Baixar QR Code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 316,\n    columnNumber: 5\n  }, this);\n}\n_s(CriarEtiqueta, \"ifbdcnj4GwXe44vJSvAUXUTJN4U=\");\n_c = CriarEtiqueta;\nexport default CriarEtiqueta;\nvar _c;\n$RefreshReg$(_c, \"CriarEtiqueta\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","XLSX","API_ENDPOINTS","jsxDEV","_jsxDEV","CriarEtiqueta","_s","imei","setImei","excelData","setExcelData","isLoading","setIsLoading","progress","setProgress","total","processed","success","errors","clusterId","setClusterId","isGeneratingQrCode","setIsGeneratingQrCode","qrCodeImage","setQrCodeImage","downloadImage","url","filename","link","document","createElement","href","download","body","appendChild","click","removeChild","startsWith","setTimeout","URL","revokeObjectURL","error","console","alert","fileInputRef","length","handleGenerateQrCode","log","CLUSTER_QRCODE","urlWithCacheBust","includes","Date","now","response","fetch","method","credentials","headers","ok","Error","status","statusText","blob","size","blobUrl","createObjectURL","img","Image","Promise","resolve","reject","onload","width","height","onerror","src","message","fallbackUrl","window","open","handleImeiChange","e","target","value","enviarLoteParaAPI","lote","loteIndex","totalLotes","CLUSTERS","JSON","stringify","nome","imeis","descricao","data","json","cluster_id","processarIMEsEmLotes","tamanhoLote","lotes","i","push","slice","resultados","prev","loteAtual","resultado","handleSubmit","preventDefault","trim","imeiUnico","csvContent","Blob","type","file","File","processarArquivoCSV","map","item","IMEI","Imei","filter","Boolean","join","handleClearFile","formData","FormData","append","PROCESSAR_CSV","searchParams","result","handleFileUpload","files","name","endsWith","current","className","children","fileName","_jsxFileName","lineNumber","columnNumber","accept","onChange","ref","style","display","id","onClick","getElementById","onSubmit","htmlFor","required","disabled","placeholder","title","marginTop","textAlign","border","borderRadius","padding","margin","backgroundColor","boxShadow","maxWidth","color","alt","onError","fontSize","wordBreak","maxHeight","overflowY","substring","downloadUrl","a","cache","_c","$RefreshReg$"],"sources":["C:/Users/mrmst/OneDrive/Documentos/Front End/ClusterWarehouse/src/Components/CriarEtiqueta.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport * as XLSX from 'xlsx';\nimport { API_ENDPOINTS } from '../config';\nimport './CriarEtiqueta.css';\n\nfunction CriarEtiqueta() {\n  const [imei, setImei] = useState('');\n  const [excelData, setExcelData] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [progress, setProgress] = useState({ total: 0, processed: 0, success: 0, errors: 0 });\n  const [clusterId, setClusterId] = useState(null);\n  const [isGeneratingQrCode, setIsGeneratingQrCode] = useState(false);\n  const [qrCodeImage, setQrCodeImage] = useState(null);\n  \n  // Função auxiliar para fazer o download da imagem\n  const downloadImage = useCallback((url, filename) => {\n    try {\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = filename || `qrcode-${clusterId || 'download'}.png`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      \n      // Se for uma URL de blob, limpa o objeto URL após o download\n      if (url.startsWith('blob:')) {\n        setTimeout(() => URL.revokeObjectURL(url), 100);\n      }\n    } catch (error) {\n      console.error('Erro ao baixar a imagem:', error);\n      alert('Erro ao baixar o QR code. Por favor, tente novamente.');\n    }\n  }, [clusterId]);\n  const fileInputRef = useRef(null);\n  \n  // Limpar o progresso quando os dados do Excel forem alterados\n  useEffect(() => {\n    if (excelData.length === 0) {\n      setProgress({ total: 0, processed: 0, success: 0, errors: 0 });\n    }\n  }, [excelData]);\n\n  const handleGenerateQrCode = async () => {\n    if (!clusterId) {\n      console.error('Nenhum clusterId disponível');\n      alert('Erro: Nenhum clusterId disponível para gerar o QR code');\n      return;\n    }\n    \n    console.log('Iniciando geração do QR code para o cluster:', clusterId);\n    setIsGeneratingQrCode(true);\n    setQrCodeImage(null); // Limpa a imagem anterior\n    \n    try {\n      // URL do QR code com cache busting\n      const url = API_ENDPOINTS.CLUSTER_QRCODE(clusterId);\n      const urlWithCacheBust = `${url}${url.includes('?') ? '&' : '?'}_=${Date.now()}`;\n      \n      console.log('Tentando carregar QR code de:', urlWithCacheBust);\n      \n      // Tenta fazer o download da imagem primeiro\n      const response = await fetch(urlWithCacheBust, {\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n          'Accept': 'image/png,image/*;q=0.8',\n          'Cache-Control': 'no-cache',\n          'Pragma': 'no-cache'\n        }\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Erro ao carregar o QR code: ${response.status} ${response.statusText}`);\n      }\n      \n      const blob = await response.blob();\n      if (!blob || blob.size === 0) {\n        throw new Error('A resposta do servidor está vazia');\n      }\n      \n      // Cria uma URL temporária para o blob\n      const blobUrl = URL.createObjectURL(blob);\n      \n      // Verifica se a imagem é válida\n      const img = new Image();\n      await new Promise((resolve, reject) => {\n        img.onload = () => {\n          if (img.width > 0 && img.height > 0) {\n            resolve();\n          } else {\n            reject(new Error('A imagem carregada tem dimensões inválidas'));\n          }\n        };\n        img.onerror = () => reject(new Error('Falha ao carregar a imagem'));\n        img.src = blobUrl;\n      });\n      \n      // Se chegou até aqui, a imagem é válida\n      setQrCodeImage(blobUrl);\n      \n    } catch (error) {\n      console.error('Erro ao gerar QR code:', error);\n      alert(`Erro ao gerar QR code: ${error.message}.\\n\\nTentando abrir em uma nova janela...`);\n      \n      // Tenta abrir em uma nova janela como fallback\n      const fallbackUrl = `${API_ENDPOINTS.CLUSTER_QRCODE(clusterId)}?${Date.now()}`;\n      window.open(fallbackUrl, '_blank');\n    } finally {\n      setIsGeneratingQrCode(false);\n    }\n  };\n\nconst handleImeiChange = (e) => {\n    setImei(e.target.value);\n  };\n\n  const enviarLoteParaAPI = async (lote, loteIndex, totalLotes) => {\n    try {\n      const response = await fetch(API_ENDPOINTS.CLUSTERS, {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json',\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          nome: `Lote ${loteIndex + 1} de ${totalLotes}`,\n          imeis: lote,\n          descricao: `Lote ${loteIndex + 1} de IMEIs processados`\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erro no lote ${loteIndex + 1}: ${response.status}`);\n      }\n\n      const data = await response.json();\n      if (data.cluster_id) {\n        setClusterId(data.cluster_id);\n      }\n      return { success: true, data };\n    } catch (error) {\n      console.error(`Erro no lote ${loteIndex + 1}:`, error);\n      return { success: false, error, imeis: lote };\n    }\n  };\n\n  const processarIMEsEmLotes = async (imeis, tamanhoLote = 10) => {\n    const lotes = [];\n    for (let i = 0; i < imeis.length; i += tamanhoLote) {\n      lotes.push(imeis.slice(i, i + tamanhoLote));\n    }\n\n    const resultados = [];\n    const totalLotes = lotes.length;\n\n    for (let i = 0; i < lotes.length; i++) {\n      const lote = lotes[i];\n      setProgress(prev => ({\n        ...prev,\n        loteAtual: i + 1,\n        totalLotes\n      }));\n      \n      const resultado = await enviarLoteParaAPI(lote, i, totalLotes);\n      resultados.push(resultado);\n      \n      setProgress(prev => ({\n        ...prev,\n        processed: prev.processed + lote.length,\n        success: resultado.success ? prev.success + lote.length : prev.success,\n        errors: !resultado.success ? prev.errors + lote.length : prev.errors\n      }));\n    }\n\n    return resultados;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (isLoading) return;\n    \n    try {\n      if (imei.trim()) {\n        // Processar apenas o IMEI digitado\n        const imeiUnico = imei.trim();\n        console.log('Processando IMEI:', imeiUnico);\n        \n        setIsLoading(true);\n        setProgress({\n          total: 1,\n          processed: 0,\n          success: 0,\n          errors: 0\n        });\n        \n        // Criar um arquivo CSV temporário com o IMEI\n        const csvContent = `IMEI\\n${imeiUnico}`;\n        const blob = new Blob([csvContent], { type: 'text/csv' });\n        const file = new File([blob], 'imei.csv', { type: 'text/csv' });\n        \n        // Processar o arquivo CSV\n        await processarArquivoCSV(file);\n        setImei('');\n      } else if (excelData.length > 0) {\n        // Se houver dados do Excel, converter para CSV e enviar\n        const csvContent = [\n          'IMEI', // Cabeçalho\n          ...excelData.map(item => (item.IMEI || item.imei || item.Imei || '').trim()).filter(Boolean)\n        ].join('\\n');\n        \n        const blob = new Blob([csvContent], { type: 'text/csv' });\n        const file = new File([blob], 'imeis.csv', { type: 'text/csv' });\n        \n        await processarArquivoCSV(file);\n        handleClearFile();\n      } else {\n        alert('Por favor, insira um IMEI, carregue um arquivo CSV ou Excel.');\n      }\n    } catch (error) {\n      console.error('Erro ao processar:', error);\n      alert(error.message || 'Ocorreu um erro ao processar. Verifique o console para mais detalhes.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const processarArquivoCSV = async (file) => {\n    setIsLoading(true);\n    setProgress({\n      total: 1,\n      processed: 0,\n      success: 0,\n      errors: 0\n    });\n\n    const formData = new FormData();\n    formData.append('file', file);\n\n    try {\n      const url = new URL(API_ENDPOINTS.PROCESSAR_CSV);\n      url.searchParams.append('criar_cluster_automatico', 'true');\n      url.searchParams.append('nome_cluster', 'Cluster gerado a partir de CSV');\n\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'accept': 'application/json',\n        },\n        body: formData\n      });\n\n      if (!response.ok) {\n        throw new Error(`Erro ao processar o arquivo: ${response.statusText}`);\n      }\n\n      const result = await response.json();\n      console.log('Arquivo processado com sucesso:', result);\n      \n      // Atualiza o estado do clusterId se estiver na resposta\n      if (result.cluster_id) {\n        setClusterId(result.cluster_id);\n      }\n      \n      setProgress(prev => ({\n        ...prev,\n        processed: 1,\n        success: 1\n      }));\n\n      return result;\n    } catch (error) {\n      console.error('Erro ao processar o arquivo:', error);\n      setProgress(prev => ({\n        ...prev,\n        errors: 1\n      }));\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    try {\n      // Verifica se é um arquivo CSV\n      if (!file.name.endsWith('.csv') && !file.type.includes('csv')) {\n        throw new Error('Por favor, selecione um arquivo CSV.');\n      }\n\n      // Processa o arquivo CSV diretamente\n      await processarArquivoCSV(file);\n      \n      // Limpa o input de arquivo\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (error) {\n      console.error('Erro:', error);\n      alert(error.message || 'Erro ao processar o arquivo. Verifique o console para mais detalhes.');\n    }\n  };\n\n  const handleClearFile = () => {\n    setExcelData([]);\n    setImei('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  return (\n    <div className=\"criar-etiqueta\">\n      <h2>Gerar Etiqueta de IMEI</h2>\n      \n      <div className=\"importar-excel\">\n        <h3>Importar IMEIs do Excel/CSV</h3>\n          <input\n            type=\"file\"\n            accept=\".csv, .xlsx, .xls\"\n            onChange={handleFileUpload}\n            ref={fileInputRef}\n            style={{ display: 'none' }}\n            id=\"file-upload\"\n          />\n        <div className=\"file-upload-container\">\n          <button \n            type=\"button\" \n            className=\"file-upload-button\"\n            onClick={() => document.getElementById('file-upload').click()}\n          >\n            {isLoading ? 'Processando...' : 'Selecionar Arquivo (CSV/Excel)'}\n          </button>\n          {excelData.length > 0 && (\n            <div className=\"file-info\">\n              <span>{excelData.length} IMEIs carregados</span>\n              <button \n                type=\"button\" \n                className=\"clear-button\"\n                onClick={handleClearFile}\n              >\n                Limpar\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"divider\">ou</div>\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label htmlFor=\"imei\">IMEI:</label>\n          <input\n            type=\"text\"\n            id=\"imei\"\n            name=\"imei\"\n            value={imei}\n            onChange={handleImeiChange}\n            required={excelData.length === 0}\n            disabled={excelData.length > 0}\n            placeholder=\"Digite o número do IMEI\"\n          />\n        </div>\n        \n        <div className=\"button-group\">\n          <button \n            type=\"submit\" \n            className=\"submit-button\"\n            disabled={isLoading}\n          >\n            {isLoading ? (\n              <span>Processando... {progress.processed}/{progress.total}</span>\n            ) : excelData.length > 0 ? (\n              `Gerar ${excelData.length} Etiquetas`\n            ) : (\n              'Processar IMEIs'\n            )}\n          </button>\n          \n          {/* Barra de progresso */}\n          {isLoading && progress.total > 0 && (\n            <div className=\"progress-container\">\n              <p>Processando: {progress.processed} de {progress.total} IMEIs</p>\n              <div className=\"progress-bar\">\n                <div \n                  className=\"progress-bar-fill\" \n                  style={{ width: `${(progress.processed / progress.total) * 100}%` }}\n                ></div>\n              </div>\n              <p>Sucesso: {progress.success} | Erros: {progress.errors}</p>\n              {progress.loteAtual && (\n                <div className=\"progress-info\">\n                  Lote {progress.loteAtual} de {progress.totalLotes} • \n                  Sucessos: {progress.success} • \n                  Erros: {progress.errors}\n                </div>\n              )}\n            </div>\n          )}\n          \n          {/* Botão de Gerar QR Code - Sempre visível */}\n          <div className=\"qr-code-button-container\">\n            <button \n              className={`criar-etiqueta-btn ${!clusterId || isGeneratingQrCode ? 'disabled' : ''}`}\n              onClick={handleGenerateQrCode}\n              disabled={!clusterId || isGeneratingQrCode}\n              title={!clusterId ? 'Aguardando processamento...' : ''}\n            >\n              {isGeneratingQrCode ? 'Gerando QR Code...' : 'Gerar QR Code'}\n            </button>\n            \n            {/* Exibição do QR Code */}\n            {qrCodeImage && (\n              <div className=\"qr-code-preview\" style={{ marginTop: '20px', textAlign: 'center' }}>\n                <h4>QR Code Gerado:</h4>\n                <div style={{ \n                  border: '1px solid #e0e0e0', \n                  borderRadius: '8px',\n                  padding: '20px', \n                  margin: '15px 0',\n                  backgroundColor: '#f9f9f9',\n                  boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n                }}>\n                  <div style={{ \n                    maxWidth: '300px', \n                    margin: '0 auto',\n                    padding: '15px',\n                    backgroundColor: 'white',\n                    borderRadius: '4px',\n                    border: '1px solid #ddd',\n                    textAlign: 'center'\n                  }}>\n                    {isGeneratingQrCode ? (\n                      <div style={{ padding: '20px', color: '#666' }}>Gerando QR Code...</div>\n                    ) : qrCodeImage ? (\n                      <img \n                        src={qrCodeImage} \n                        alt=\"QR Code do Cluster\" \n                        style={{ \n                          maxWidth: '100%', \n                          height: 'auto',\n                          display: 'block',\n                          margin: '0 auto'\n                        }}\n                        onError={(e) => {\n                          console.error('Erro ao carregar a imagem:', e);\n                          alert('Não foi possível carregar o QR Code. Tente novamente ou baixe manualmente.');\n                        }}\n                      />\n                    ) : (\n                      <div style={{ padding: '20px', color: '#666' }}>Clique em \"Gerar QR Code\" para visualizar</div>\n                    )}\n                  </div>\n                  <div style={{ \n                    marginTop: '15px', \n                    fontSize: '0.9em',\n                    color: '#666',\n                    wordBreak: 'break-all',\n                    textAlign: 'left',\n                    padding: '10px',\n                    backgroundColor: '#f0f0f0',\n                    borderRadius: '4px',\n                    maxHeight: '100px',\n                    overflowY: 'auto'\n                  }}>\n                    <div><strong>URL:</strong> {qrCodeImage.length > 50 ? qrCodeImage.substring(0, 50) + '...' : qrCodeImage}</div>\n                  </div>\n                </div>\n                <div className=\"qr-code-actions\">\n                  <button \n                    className=\"download-qr-btn\"\n                    onClick={async (e) => {\n                      e.preventDefault();\n                      try {\n                        console.log('Iniciando download do QR code:', qrCodeImage);\n                        \n                        // Se for uma URL de blob, faz o download diretamente\n                        if (qrCodeImage.startsWith('blob:')) {\n                          // Cria um link temporário para o download\n                          const response = await fetch(qrCodeImage);\n                          const blob = await response.blob();\n                          const downloadUrl = URL.createObjectURL(blob);\n                          \n                          const a = document.createElement('a');\n                          a.href = downloadUrl;\n                          a.download = `qrcode-${clusterId}.png`;\n                          document.body.appendChild(a);\n                          a.click();\n                          \n                          // Limpa o objeto URL após o download\n                          setTimeout(() => {\n                            document.body.removeChild(a);\n                            URL.revokeObjectURL(downloadUrl);\n                          }, 100);\n                          \n                          return;\n                        }\n                        \n                        // Se for uma URL remota, tenta baixar diretamente\n                        const response = await fetch(qrCodeImage, {\n                          credentials: 'include',\n                          cache: 'no-cache'\n                        });\n                        \n                        if (!response.ok) {\n                          throw new Error(`Erro ao baixar a imagem: ${response.status} ${response.statusText}`);\n                        }\n                        \n                        const blob = await response.blob();\n                        const downloadUrl = URL.createObjectURL(blob);\n                        \n                        const a = document.createElement('a');\n                        a.href = downloadUrl;\n                        a.download = `qrcode-${clusterId}.png`;\n                        document.body.appendChild(a);\n                        a.click();\n                        \n                        // Limpa o objeto URL após o download\n                        setTimeout(() => {\n                          document.body.removeChild(a);\n                          URL.revokeObjectURL(downloadUrl);\n                        }, 100);\n                        \n                      } catch (error) {\n                        console.error('Erro ao baixar o QR code:', error);\n                        alert(`Erro ao baixar o QR code: ${error.message}`);\n                      }\n                    }}\n                  >\n                    Baixar QR Code\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default CriarEtiqueta;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}